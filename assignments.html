<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignments - studying.works</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="global-styles.css">
    <link rel="stylesheet" href="button-styles.css">
    <style>
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in {
            animation: slideIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        function Navigation() {
            return (
                <nav className="bg-black/30 backdrop-blur-lg border-b border-white/10 fixed top-0 left-0 right-0 z-50">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex items-center justify-between h-16">
                            <div className="flex items-center space-x-8">
                                <a href="dashboard.html" className="text-2xl font-bold text-white flex items-center space-x-2 hover:scale-105 transition-transform">
                                    <span>üéì</span>
                                    <span>studying.works</span>
                                </a>
                                <div className="hidden md:flex space-x-4">
                                    <a href="dashboard.html" className="text-white/80 hover:text-white hover:bg-white/10 px-3 py-2 rounded-lg transition-all">Dashboard</a>
                                    <a href="assignments.html" className="text-white font-semibold px-3 py-2 rounded-lg bg-white/10">Assignments</a>
                                    <a href="progress.html" className="text-white/80 hover:text-white hover:bg-white/10 px-3 py-2 rounded-lg transition-all">Progress</a>
                                    <a href="about.html" className="text-white/80 hover:text-white hover:bg-white/10 px-3 py-2 rounded-lg transition-all">About</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            );
        }

        function AssignmentsApp() {
            const [tasks, setTasks] = useState([]);
            const [newTask, setNewTask] = useState('');
            const [newSubject, setNewSubject] = useState('');
            const [newDueDate, setNewDueDate] = useState('');
            const [newPriority, setNewPriority] = useState('medium');
            const [filter, setFilter] = useState('all');
            const [showCompleted, setShowCompleted] = useState(false);

            useEffect(() => {
                const saved = localStorage.getItem('assignments');
                if (saved) setTasks(JSON.parse(saved));
            }, []);

            const saveTasks = (newTasks) => {
                setTasks(newTasks);
                localStorage.setItem('assignments', JSON.stringify(newTasks));
            };

            const addTask = () => {
                if (newTask.trim()) {
                    const task = {
                        id: Date.now(),
                        title: newTask.trim(),
                        subject: newSubject.trim() || 'General',
                        dueDate: newDueDate || null,
                        priority: newPriority,
                        completed: false,
                        created: new Date().toISOString()
                    };
                    saveTasks([...tasks, task]);
                    setNewTask('');
                    setNewSubject('');
                    setNewDueDate('');
                    setNewPriority('medium');
                }
            };

            const toggleTask = (id) => {
                saveTasks(tasks.map(t => t.id === id ? {...t, completed: !t.completed} : t));
            };

            const deleteTask = (id) => {
                saveTasks(tasks.filter(t => t.id !== id));
            };

            const getPriorityColor = (priority) => {
                switch(priority) {
                    case 'high': return 'from-red-500 to-pink-500';
                    case 'medium': return 'from-yellow-500 to-orange-500';
                    case 'low': return 'from-green-500 to-teal-500';
                    default: return 'from-gray-500 to-gray-600';
                }
            };

            const getDaysUntil = (dueDate) => {
                if (!dueDate) return null;
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const due = new Date(dueDate);
                due.setHours(0, 0, 0, 0);
                const diffTime = due - today;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays;
            };

            const filteredTasks = tasks.filter(task => {
                if (!showCompleted && task.completed) return false;
                if (filter === 'all') return true;
                if (filter === 'today') {
                    if (!task.dueDate) return false;
                    const days = getDaysUntil(task.dueDate);
                    return days === 0;
                }
                if (filter === 'week') {
                    if (!task.dueDate) return false;
                    const days = getDaysUntil(task.dueDate);
                    return days >= 0 && days <= 7;
                }
                if (filter === 'overdue') {
                    if (!task.dueDate) return false;
                    return getDaysUntil(task.dueDate) < 0;
                }
                return task.priority === filter;
            });

            const stats = {
                total: tasks.length,
                completed: tasks.filter(t => t.completed).length,
                overdue: tasks.filter(t => !t.completed && t.dueDate && getDaysUntil(t.dueDate) < 0).length,
                today: tasks.filter(t => !t.completed && t.dueDate && getDaysUntil(t.dueDate) === 0).length,
            };

            return (
                <>
                    <Navigation />
                    <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-4 pt-20">
                        <div className="max-w-7xl mx-auto">
                            <div className="mb-6 animate-slide-in">
                                <h1 className="text-5xl font-bold text-white mb-2">‚úÖ Assignments & Tasks</h1>
                                <p className="text-xl text-blue-200">Stay organized and never miss a deadline</p>
                            </div>

                            {/* Priority Overview Banner */}
                            <div className="mb-8 animate-slide-in" style={{animationDelay: '0.05s', opacity: 0}}>
                                <div className="bg-gradient-to-r from-blue-500/20 via-purple-500/20 to-pink-500/20 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div className="flex items-center space-x-4">
                                            <div className="text-4xl">üìå</div>
                                            <div>
                                                <div className="text-white/80 text-sm font-semibold">Upcoming Next</div>
                                                <div className="text-white font-bold text-lg">
                                                    {(() => {
                                                        const upcoming = tasks.filter(t => !t.completed && t.dueDate)
                                                            .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate))[0];
                                                        if (!upcoming) return 'All clear!';
                                                        const days = getDaysUntil(upcoming.dueDate);
                                                        if (days === 0) return 'Task due today!';
                                                        if (days === 1) return 'Task due tomorrow';
                                                        if (days < 0) return `${Math.abs(days)}d overdue`;
                                                        return `Due in ${days} days`;
                                                    })()}
                                                </div>
                                            </div>
                                        </div>
                                        <div className="flex items-center space-x-4">
                                            <div className="text-4xl">üéØ</div>
                                            <div>
                                                <div className="text-white/80 text-sm font-semibold">Priority Tasks</div>
                                                <div className="text-white font-bold text-lg">
                                                    {tasks.filter(t => !t.completed && t.priority === 'high').length} high priority
                                                </div>
                                            </div>
                                        </div>
                                        <div className="flex items-center space-x-4">
                                            <div className="text-4xl">üìä</div>
                                            <div>
                                                <div className="text-white/80 text-sm font-semibold">Completion Rate</div>
                                                <div className="text-white font-bold text-lg">
                                                    {tasks.length > 0 ? Math.round((stats.completed / stats.total) * 100) : 0}% complete
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                                <div className="card-gradient-blue rounded-2xl p-6 text-white animate-slide-in" style={{animationDelay: '0.1s', opacity: 0}}>
                                    <div className="text-4xl mb-2">üìù</div>
                                    <div className="text-3xl font-bold">{stats.total}</div>
                                    <div className="text-blue-100 text-sm">Total Tasks</div>
                                </div>
                                <div className="card-gradient-success rounded-2xl p-6 text-white animate-slide-in" style={{animationDelay: '0.2s', opacity: 0}}>
                                    <div className="text-4xl mb-2">‚úÖ</div>
                                    <div className="text-3xl font-bold">{stats.completed}</div>
                                    <div className="text-green-100 text-sm">Completed</div>
                                </div>
                                <div className="card-gradient-fire rounded-2xl p-6 text-white animate-slide-in" style={{animationDelay: '0.3s', opacity: 0}}>
                                    <div className="text-4xl mb-2">‚è∞</div>
                                    <div className="text-3xl font-bold">{stats.today}</div>
                                    <div className="text-orange-100 text-sm">Due Today</div>
                                </div>
                                <div className="card-gradient-rose rounded-2xl p-6 text-white animate-slide-in" style={{animationDelay: '0.4s', opacity: 0}}>
                                    <div className="text-4xl mb-2">üö®</div>
                                    <div className="text-3xl font-bold">{stats.overdue}</div>
                                    <div className="text-red-100 text-sm">Overdue</div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                <div className="lg:col-span-1">
                                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 animate-slide-in" style={{animationDelay: '0.5s', opacity: 0}}>
                                        <h2 className="text-2xl font-bold text-white mb-4">‚ûï Add Task</h2>
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-white/80 mb-2 font-semibold">Task</label>
                                                <input type="text" value={newTask} onChange={(e) => setNewTask(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && addTask()} placeholder="What do you need to do?" className="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-500 font-semibold" />
                                            </div>
                                            <div>
                                                <label className="block text-white/80 mb-2 font-semibold">Subject</label>
                                                <input type="text" value={newSubject} onChange={(e) => setNewSubject(e.target.value)} placeholder="e.g., Biology, Math" className="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-500 font-semibold" />
                                            </div>
                                            <div>
                                                <label className="block text-white/80 mb-2 font-semibold">Due Date</label>
                                                <input type="date" value={newDueDate} onChange={(e) => setNewDueDate(e.target.value)} className="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-500 font-semibold" />
                                            </div>
                                            <div>
                                                <label className="block text-white/80 mb-2 font-semibold">Priority</label>
                                                <select value={newPriority} onChange={(e) => setNewPriority(e.target.value)} className="w-full px-4 py-3 rounded-xl bg-white/90 text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-500 font-semibold">
                                                    <option value="low">Low</option>
                                                    <option value="medium">Medium</option>
                                                    <option value="high">High</option>
                                                </select>
                                            </div>
                                            <button onClick={addTask} disabled={!newTask.trim()} className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-xl font-bold text-lg disabled:opacity-50 hover:shadow-lg transform hover:scale-105 transition-all">
                                                Add Task
                                            </button>
                                        </div>
                                    </div>

                                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 mt-6 animate-slide-in" style={{animationDelay: '0.6s', opacity: 0}}>
                                        <h3 className="text-xl font-bold text-white mb-4">üîç Filter</h3>
                                        <div className="space-y-2">
                                            {['all', 'today', 'week', 'overdue', 'high'].map(f => (
                                                <button key={f} onClick={() => setFilter(f)} className={`w-full text-left px-4 py-3 rounded-xl font-semibold transition-all ${filter === f ? 'bg-white text-purple-600' : 'bg-white/20 text-white hover:bg-white/30'}`}>
                                                    {f === 'all' ? 'All Tasks' : f === 'today' ? 'Due Today' : f === 'week' ? 'This Week' : f === 'overdue' ? 'Overdue' : 'High Priority'}
                                                </button>
                                            ))}
                                        </div>
                                        <div className="mt-4 pt-4 border-t border-white/20">
                                            <label className="flex items-center space-x-3 text-white cursor-pointer">
                                                <input type="checkbox" checked={showCompleted} onChange={(e) => setShowCompleted(e.target.checked)} className="w-5 h-5 rounded" />
                                                <span className="font-semibold">Show Completed</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div className="lg:col-span-2">
                                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 animate-slide-in" style={{animationDelay: '0.7s', opacity: 0}}>
                                        <h2 className="text-2xl font-bold text-white mb-4">
                                            {filter === 'all' ? 'All Tasks' : filter === 'today' ? 'Due Today' : filter === 'week' ? 'This Week' : filter === 'overdue' ? 'Overdue' : 'High Priority'}
                                            <span className="ml-2 text-lg font-normal text-white/60">({filteredTasks.length})</span>
                                        </h2>

                                        {filteredTasks.length === 0 ? (
                                            <div className="text-center py-16">
                                                <div className="text-7xl mb-4">‚úÖ</div>
                                                <p className="text-white/60 text-lg">
                                                    {tasks.length === 0 ? 'No tasks yet. Add one to get started!' : "You're all caught up!"}
                                                </p>
                                            </div>
                                        ) : (
                                            <div className="space-y-3 max-h-[700px] overflow-y-auto">
                                                {filteredTasks.sort((a, b) => {
                                                    if (a.completed !== b.completed) return a.completed ? 1 : -1;
                                                    if (!a.dueDate && !b.dueDate) return 0;
                                                    if (!a.dueDate) return 1;
                                                    if (!b.dueDate) return -1;
                                                    return new Date(a.dueDate) - new Date(b.dueDate);
                                                }).map(task => {
                                                    const daysUntil = getDaysUntil(task.dueDate);
                                                    const isOverdue = daysUntil !== null && daysUntil < 0;
                                                    const isDueToday = daysUntil === 0;
                                                    
                                                    return (
                                                        <div key={task.id} className={`bg-gradient-to-r ${getPriorityColor(task.priority)} p-4 rounded-xl ${task.completed ? 'opacity-60' : ''}`}>
                                                            <div className="flex items-start space-x-3">
                                                                <input type="checkbox" checked={task.completed} onChange={() => toggleTask(task.id)} className="w-6 h-6 mt-1 rounded cursor-pointer" />
                                                                <div className="flex-1">
                                                                    <h3 className={`text-white font-bold text-lg ${task.completed ? 'line-through' : ''}`}>{task.title}</h3>
                                                                    <div className="flex flex-wrap items-center gap-2 mt-2">
                                                                        <span className="bg-white/30 text-white px-3 py-1 rounded-full text-xs font-bold">{task.subject}</span>
                                                                        <span className="bg-white/30 text-white px-3 py-1 rounded-full text-xs font-bold">{task.priority} priority</span>
                                                                        {task.dueDate && (
                                                                            <span className={`px-3 py-1 rounded-full text-xs font-bold ${isOverdue ? 'bg-red-200 text-red-900' : isDueToday ? 'bg-yellow-200 text-yellow-900' : 'bg-white/30 text-white'}`}>
                                                                                {isOverdue ? `${Math.abs(daysUntil)} days overdue` : isDueToday ? 'Due today!' : daysUntil === 1 ? 'Due tomorrow' : `Due in ${daysUntil} days`}
                                                                            </span>
                                                                        )}
                                                                    </div>
                                                                    {task.dueDate && (
                                                                        <p className="text-white/80 text-sm mt-2">üìÖ {new Date(task.dueDate).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>
                                                                    )}
                                                                </div>
                                                                <button onClick={() => deleteTask(task.id)} className="bg-white/20 hover:bg-white/30 text-white px-3 py-2 rounded-lg font-semibold transition-all">
                                                                    üóëÔ∏è
                                                                </button>
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        ReactDOM.render(<AssignmentsApp />, document.getElementById('root'));
    </script>
    <!-- Dynamic Gradient System -->
    <script src="dynamic-gradient.js"></script>
</body>
</html>