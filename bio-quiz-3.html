<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio Quiz #3 - Complete Study Guide</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="global-styles.css">
    <link rel="stylesheet" href="apple-style.css">
    <link rel="stylesheet" href="button-styles.css">
    <style>
        /* Interactive diagram styles */
        .interactive-cell {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .interactive-cell:hover {
            transform: scale(1.05);
            filter: brightness(1.2);
        }
        .cell-part {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .cell-part:hover {
            stroke-width: 3;
            filter: drop-shadow(0 0 10px currentColor);
        }
        .cell-part.active {
            stroke-width: 4;
            filter: drop-shadow(0 0 15px currentColor);
        }
        .enzyme-animation {
            animation: enzyme-pulse 2s ease-in-out infinite;
        }
        @keyframes enzyme-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .concept-node {
            transition: all 0.3s ease;
        }
        .concept-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.4);
        }
        .comparison-row:hover {
            background: rgba(124, 58, 237, 0.1);
        }
        .flashcard-3d {
            perspective: 1000px;
        }
        .flashcard-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flashcard-inner.flipped {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            backface-visibility: hidden;
        }
        .flashcard-back {
            transform: rotateY(180deg);
        }
        .microscope-slider {
            width: 100%;
            height: 8px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }
        .microscope-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <div class="nav-container">
            <a href="dashboard" class="nav-logo">
                <span>üéì</span>
                <span>studying.works</span>
            </a>
            <div class="nav-links">
                <a href="dashboard" class="nav-link">Dashboard</a>
            </div>
        </div>
    </nav>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect, useRef } = React;

function BioQuiz3App() {
  const [mode, setMode] = useState('menu');
  const [currentCard, setCurrentCard] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [testQuestions, setTestQuestions] = useState([]);
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [userAnswers, setUserAnswers] = useState({});
  const [showResults, setShowResults] = useState(false);
  const [mistakeBank, setMistakeBank] = useState([]);
  const [selectedCellPart, setSelectedCellPart] = useState(null);
  const [microscopeZoom, setMicroscopeZoom] = useState(400);
  const [enzymeStep, setEnzymeStep] = useState(0);
  const [customTestQuestions, setCustomTestQuestions] = useState([]);
  const [definitionsView, setDefinitionsView] = useState('learn'); // 'learn' or 'flashcard'

  // Load mistake bank from localStorage
  useEffect(() => {
    const saved = localStorage.getItem('bioQuiz3Mistakes');
    if (saved) {
      setMistakeBank(JSON.parse(saved));
    }
  }, []);

  // Save mistake bank
  const saveMistakeBank = (mistakes) => {
    localStorage.setItem('bioQuiz3Mistakes', JSON.stringify(mistakes));
    setMistakeBank(mistakes);
  };

  // Quick Reference Facts (easily forgettable)
  const quickFacts = [
    { emoji: '‚öõÔ∏è', fact: 'Isotopes = same protons, different neutrons', category: 'Atomic' },
    { emoji: 'üíß', fact: 'Hydrogen bonds: 2 for A-T, 3 for G-C', category: 'Bonding' },
    { emoji: 'üçû', fact: 'Starch (plant), Glycogen (animal), Cellulose (structure)', category: 'Carbs' },
    { emoji: 'üßà', fact: 'Saturated = solid, Unsaturated = liquid', category: 'Lipids' },
    { emoji: 'üî¨', fact: 'Light microscope: ~1000x, Electron: ~1,000,000x', category: 'Cells' },
    { emoji: 'üß¨', fact: 'DNA: deoxyribose + T, RNA: ribose + U', category: 'Nucleic Acids' },
    { emoji: '‚ö°', fact: 'Enzyme: speeds reaction, NOT consumed', category: 'Enzymes' },
    { emoji: 'üìä', fact: 'Mean = average, Median = middle, Mode = most frequent', category: 'Data' },
    { emoji: 'üî¨', fact: 'Independent = what you change, Dependent = what you measure', category: 'Experiments' },
    { emoji: 'ü¶†', fact: 'Prokaryote = NO nucleus, Eukaryote = HAS nucleus', category: 'Cells' },
    { emoji: 'üß´', fact: 'Dehydration = build + remove H‚ÇÇO, Hydrolysis = break + add H‚ÇÇO', category: 'Reactions' },
    { emoji: 'üîó', fact: 'Primary = sequence, Secondary = helix/sheet, Tertiary = 3D shape', category: 'Proteins' },
  ];

  // Cell images and diagrams (using Wikimedia Commons URLs)
  const cellImages = {
    prokaryotic: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Prokaryote_cell.svg/600px-Prokaryote_cell.svg.png',
    eukaryotic: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Biological_cell.svg/600px-Biological_cell.svg.png',
    plant: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Plant_cell_structure_svg.svg/600px-Plant_cell_structure_svg.png',
    animal: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Animal_cell_structure_en.svg/600px-Animal_cell_structure_en.svg.png',
  };

  // Image loading state
  const [imageErrors, setImageErrors] = useState({});

  // Comprehensive topic data
  const topicCategories = [
    {
      name: 'Experimental Design',
      icon: 'üî¨',
      color: 'card-gradient-blue',
      concepts: [
        {
          term: 'Independent Variable',
          definition: 'The variable that is deliberately changed or manipulated in an experiment.',
          example: 'If testing how light affects plant growth, light intensity is the independent variable.',
          visual: 'üìä',
          remember: 'Think: "I change this"'
        },
        {
          term: 'Dependent Variable',
          definition: 'The variable that is measured or observed in response to changes in the independent variable.',
          example: 'Plant height measured in response to different light intensities.',
          visual: 'üìà',
          remember: 'Think: "Data depends on what I changed"'
        },
        {
          term: 'Control Variable',
          definition: 'Variables that are kept constant throughout the experiment to ensure a fair test.',
          example: 'Same soil type, water amount, and temperature for all plants.',
          visual: 'üéØ',
          remember: 'Keep these the SAME for all groups'
        },
        {
          term: 'Testable Hypothesis',
          definition: 'A specific, measurable prediction about the relationship between variables.',
          example: 'If light intensity increases, then plant growth will increase because more energy is available for photosynthesis.',
          visual: 'üí°',
          remember: 'Format: If [change IV], then [predict DV], because [reason]'
        },
      ]
    },
    {
      name: 'Data Analysis',
      icon: 'üìä',
      color: 'card-gradient-success',
      concepts: [
        {
          term: 'Qualitative Data',
          definition: 'Descriptive data that can be observed but not measured with numbers.',
          example: 'Color of flowers, texture of leaves, smell of chemicals.',
          visual: 'üëÅÔ∏è',
          remember: 'Quality = descriptive words'
        },
        {
          term: 'Quantitative Continuous',
          definition: 'Numerical data that can take any value within a range and can be measured.',
          example: 'Temperature (37.5¬∞C), height (152.3 cm), time (4.7 seconds).',
          visual: 'üìè',
          remember: 'Can have decimals - measured'
        },
        {
          term: 'Quantitative Discontinuous',
          definition: 'Numerical data that can only take specific, discrete values (counted).',
          example: 'Number of students (25), number of seeds that germinated (18).',
          visual: 'üî¢',
          remember: 'Whole numbers only - counted'
        },
        {
          term: 'Mean',
          definition: 'The average of all values in a data set (sum √∑ count).',
          example: 'Data: 5, 8, 3, 9, 5. Mean = (5+8+3+9+5)√∑5 = 6',
          visual: '‚ûó',
          remember: 'Add all, divide by count'
        },
        {
          term: 'Median',
          definition: 'The middle value when data is arranged in order.',
          example: 'Data: 3, 5, 5, 8, 9. Median = 5 (middle value)',
          visual: 'üéØ',
          remember: 'The middle number'
        },
        {
          term: 'Mode',
          definition: 'The value that appears most frequently in a data set.',
          example: 'Data: 3, 5, 5, 8, 9. Mode = 5 (appears twice)',
          visual: 'üîÅ',
          remember: 'Most common = mode'
        },
        {
          term: 'CER Argument',
          definition: 'Claim, Evidence, Reasoning - scientific argument format.',
          example: 'Claim: Plants grow faster with more light. Evidence: Data shows 2x growth. Reasoning: Light provides energy for photosynthesis.',
          visual: 'üìã',
          remember: 'C = statement, E = data, R = why E supports C'
        },
        {
          term: 'Bar Graph',
          definition: 'Shows discontinuous (categorical) data with separate bars.',
          example: 'Number of students in each grade, types of flowers.',
          visual: 'üìä',
          remember: 'Categories = Bar graph'
        },
        {
          term: 'Line Graph',
          definition: 'Shows continuous data over time or along a continuum.',
          example: 'Plant growth over 30 days, temperature changes.',
          visual: 'üìà',
          remember: 'Connected = continuous data'
        },
      ]
    },
    {
      name: 'Atomic Structure',
      icon: '‚öõÔ∏è',
      color: 'card-gradient-purple',
      concepts: [
        {
          term: 'Proton',
          definition: 'Positively charged particle in the nucleus. Determines the element.',
          example: 'Carbon has 6 protons. All atoms with 6 protons are carbon.',
          visual: '‚ûï',
          remember: 'P = Positive, # of protons = atomic number'
        },
        {
          term: 'Neutron',
          definition: 'Neutral particle (no charge) in the nucleus. Affects atomic mass.',
          example: 'Carbon-12 has 6 neutrons. Carbon-14 has 8 neutrons.',
          visual: '‚ö™',
          remember: 'N = Neutral (no charge)'
        },
        {
          term: 'Electron',
          definition: 'Negatively charged particle orbiting the nucleus. Involved in bonding.',
          example: 'Neutral carbon has 6 electrons to balance 6 protons.',
          visual: '‚ûñ',
          remember: 'E = nEgative, orbits outside'
        },
        {
          term: 'Ion',
          definition: 'An atom with unequal protons and electrons, giving it a charge.',
          example: 'Na‚Å∫ has 11 protons but 10 electrons (lost 1 electron, positive charge).',
          visual: '‚ö°',
          remember: 'Lost e‚Åª = positive, Gained e‚Åª = negative'
        },
        {
          term: 'Isotope',
          definition: 'Atoms of the same element with different numbers of neutrons.',
          example: 'Carbon-12 (6p, 6n) and Carbon-14 (6p, 8n) are isotopes.',
          visual: 'üîÑ',
          remember: 'Same protons, different neutrons'
        },
      ]
    },
    {
      name: 'Water & Polarity',
      icon: 'üíß',
      color: 'card-gradient-sky',
      concepts: [
        {
          term: 'Covalent Bond',
          definition: 'A strong bond formed by sharing electrons between atoms within a molecule.',
          example: 'H-O bonds in water (H‚ÇÇO) are covalent bonds.',
          visual: 'üîó',
          remember: 'Co = together, WITHIN molecules'
        },
        {
          term: 'Hydrogen Bond',
          definition: 'A weak attraction between a slightly positive H and a slightly negative atom (O, N, F) in different molecules.',
          example: 'Hydrogen bonds form between water molecules.',
          visual: '„Ä∞Ô∏è',
          remember: 'Weak, BETWEEN molecules'
        },
        {
          term: 'Polar Molecule',
          definition: 'A molecule with an uneven distribution of charge.',
          example: 'Water (H‚ÇÇO) is polar. O is Œ¥‚Åª and H are Œ¥‚Å∫.',
          visual: 'üß≤',
          remember: 'Has + and - ends like a magnet'
        },
        {
          term: 'Hydrophilic',
          definition: 'Water-loving - polar or charged substances that dissolve in water.',
          example: 'Salt (NaCl), sugar, polar R groups.',
          visual: '‚ù§Ô∏è',
          remember: 'Philic = loves water'
        },
        {
          term: 'Hydrophobic',
          definition: 'Water-fearing - nonpolar substances that do not dissolve in water.',
          example: 'Oils, fats, nonpolar R groups.',
          visual: 'üò®',
          remember: 'Phobic = fears water'
        },
      ]
    },
    {
      name: 'Biological Molecules',
      icon: 'üß¨',
      color: 'card-gradient-violet',
      concepts: [
        {
          term: 'Carbohydrates',
          definition: 'Molecules made of C, H, O in 1:2:1 ratio. Quick energy, storage, structure.',
          example: 'Glucose, starch, cellulose, glycogen.',
          visual: 'üçû',
          remember: 'CHO, 1:2:1 ratio'
        },
        {
          term: 'Monosaccharide',
          definition: 'Simple sugar monomer.',
          example: 'Glucose, fructose, galactose.',
          visual: '‚¨°',
          remember: 'Mono = one sugar unit'
        },
        {
          term: 'Disaccharide',
          definition: 'Two monosaccharides joined.',
          example: 'Sucrose (glucose + fructose), lactose, maltose.',
          visual: '‚¨°‚¨°',
          remember: 'Di = two sugar units'
        },
        {
          term: 'Polysaccharide',
          definition: 'Many monosaccharides joined.',
          example: 'Starch (plants), glycogen (animals), cellulose (structure).',
          visual: '‚¨°‚¨°‚¨°‚¨°‚¨°',
          remember: 'Poly = many sugar units'
        },
        {
          term: 'Lipids',
          definition: 'Hydrophobic molecules. Long-term energy, membranes, hormones.',
          example: 'Fats, oils, phospholipids, steroids.',
          visual: 'üßà',
          remember: 'Water-fearing, high energy'
        },
        {
          term: 'Saturated Fat',
          definition: 'No double bonds. Straight chains. Solid at room temp.',
          example: 'Butter, lard, coconut oil.',
          visual: '‚îÅ',
          remember: 'Saturated with H, straight = solid'
        },
        {
          term: 'Unsaturated Fat',
          definition: 'Has double bonds creating kinks. Liquid at room temp.',
          example: 'Olive oil, vegetable oil.',
          visual: '‚àø',
          remember: 'Not saturated, kinked = liquid'
        },
        {
          term: 'Phospholipid',
          definition: 'Glycerol + 2 fatty acids + phosphate. Forms cell membranes.',
          example: 'Cell membrane bilayer.',
          visual: 'üé≠',
          remember: 'Hydrophilic head, hydrophobic tails'
        },
        {
          term: 'Proteins',
          definition: 'Polymers of amino acids. Enzymes, structure, transport, etc.',
          example: 'Enzymes, hemoglobin, antibodies, collagen.',
          visual: 'üîó',
          remember: 'CHON + sometimes S'
        },
        {
          term: 'Amino Acid',
          definition: 'Monomer of proteins. Has amino group, carboxyl group, R group.',
          example: '20 different types based on R groups.',
          visual: 'üî§',
          remember: 'NH‚ÇÇ + COOH + R group'
        },
        {
          term: 'Nucleic Acids',
          definition: 'Polymers of nucleotides. Store and transmit genetic info.',
          example: 'DNA, RNA, ATP.',
          visual: 'üß¨',
          remember: 'CHONP (has phosphorus!)'
        },
        {
          term: 'Dehydration Synthesis',
          definition: 'Building larger molecules by removing water.',
          example: 'Two glucose ‚Üí maltose + H‚ÇÇO',
          visual: 'üî®',
          remember: 'Build (anabolic) - lose water'
        },
        {
          term: 'Hydrolysis',
          definition: 'Breaking molecules by adding water.',
          example: 'Maltose + H‚ÇÇO ‚Üí two glucose',
          visual: 'üí•',
          remember: 'Break (catabolic) + add water'
        },
      ]
    },
    {
      name: 'Enzymes',
      icon: '‚ö°',
      color: 'card-gradient-amber',
      concepts: [
        {
          term: 'Enzyme',
          definition: 'Biological catalyst that speeds up reactions by lowering activation energy.',
          example: 'Catalase breaks down H‚ÇÇO‚ÇÇ, amylase breaks down starch.',
          visual: '‚ö°',
          remember: 'Speeds up, NOT consumed'
        },
        {
          term: 'Substrate',
          definition: 'The reactant molecule(s) that an enzyme acts upon.',
          example: 'For amylase, starch is the substrate.',
          visual: 'üéØ',
          remember: 'What the enzyme works on'
        },
        {
          term: 'Active Site',
          definition: 'The specific region where substrate binds.',
          example: 'Lock and key model.',
          visual: 'üîì',
          remember: 'The "keyhole" on enzyme'
        },
        {
          term: 'Competitive Inhibitor',
          definition: 'Blocks the active site by competing with substrate.',
          example: 'Shaped like substrate, fights for active site.',
          visual: 'üö´',
          remember: 'Competes for active site'
        },
        {
          term: 'Noncompetitive Inhibitor',
          definition: 'Binds elsewhere, changes enzyme shape.',
          example: 'Binds to allosteric site, distorts active site.',
          visual: 'üîß',
          remember: 'Changes shape, not blocking'
        },
        {
          term: 'Denaturation',
          definition: 'Loss of enzyme shape and function due to extreme conditions.',
          example: 'High temperature or extreme pH breaks bonds.',
          visual: 'üî•',
          remember: 'Extreme temp/pH = broken enzyme'
        },
      ]
    },
    {
      name: 'Cells',
      icon: 'ü¶†',
      color: 'card-gradient-rose',
      concepts: [
        {
          term: 'Cell Theory',
          definition: '1) All living things are made of cells. 2) Cells are basic unit of life. 3) All cells from pre-existing cells.',
          example: 'Foundation of biology.',
          visual: 'üìú',
          remember: '3 principles: all made of cells, basic unit, from existing cells'
        },
        {
          term: 'Prokaryotic Cell',
          definition: 'Simple cell with NO nucleus. DNA floats in cytoplasm.',
          example: 'Bacteria and archaea.',
          visual: 'üîµ',
          remember: 'PRO = before nucleus evolved'
        },
        {
          term: 'Eukaryotic Cell',
          definition: 'Complex cell WITH nucleus and organelles.',
          example: 'Animals, plants, fungi, protists.',
          visual: 'üü£',
          remember: 'EU = true nucleus'
        },
        {
          term: 'Cell Membrane',
          definition: 'Phospholipid bilayer that controls what enters/exits. In ALL cells.',
          example: 'Selective barrier.',
          visual: 'üé≠',
          remember: 'ALL cells have this'
        },
        {
          term: 'Cell Wall',
          definition: 'Rigid structure outside membrane. Plants, bacteria, fungi.',
          example: 'Plant walls made of cellulose.',
          visual: 'üß±',
          remember: 'Outside membrane, NOT in animals'
        },
        {
          term: 'Nucleus',
          definition: 'Contains DNA. Controls cell. Eukaryotes only.',
          example: 'The "brain" of the cell.',
          visual: 'üß†',
          remember: 'DNA command center'
        },
        {
          term: 'Ribosomes',
          definition: 'Small structures that make proteins by linking amino acids. Found in ALL cells.',
          example: 'Free in cytoplasm or attached to ER.',
          visual: '‚öôÔ∏è',
          remember: 'Protein factories - in ALL cells'
        },
        {
          term: 'Cytoplasm',
          definition: 'Gel-like fluid inside the cell where organelles are suspended and chemical reactions occur.',
          example: 'Contains water, salts, and nutrients.',
          visual: 'üíß',
          remember: 'The "jelly" that fills the cell'
        },
        {
          term: 'Mitochondria',
          definition: 'Powerhouse of the cell. Produces ATP energy through cellular respiration.',
          example: 'Found in eukaryotic cells.',
          visual: '‚ö°',
          remember: 'Mitochondria = energy producer'
        },
        {
          term: 'Chloroplast',
          definition: 'Where photosynthesis occurs. Plants and some protists.',
          example: 'Contains chlorophyll.',
          visual: 'üåø',
          remember: 'Chloro = green, makes food from light'
        },
        {
          term: 'Vacuole',
          definition: 'Storage sac for water, nutrients, and waste. Large in plant cells.',
          example: 'Provides structure/pressure in plant cells.',
          visual: 'üíß',
          remember: 'Big in plants, small in animals'
        },
        {
          term: 'Flagella/Cilia',
          definition: 'Hair-like structures for movement. Flagella are long (few), cilia are short (many).',
          example: 'Sperm use flagella, lung cells have cilia.',
          visual: 'üåä',
          remember: 'Flagella = whip, Cilia = tiny hairs'
        },
        {
          term: 'Endoplasmic Reticulum',
          definition: 'Network of membranes. Rough ER has ribosomes (makes proteins), Smooth ER makes lipids.',
          example: 'Rough ER looks bumpy, Smooth ER looks smooth.',
          visual: 'üîÄ',
          remember: 'ER = assembly line. Rough = proteins, Smooth = lipids'
        },
        {
          term: 'Golgi Apparatus',
          definition: 'Packages and modifies proteins and lipids for transport.',
          example: 'Like a post office - sorts and ships.',
          visual: 'üì¶',
          remember: 'Golgi = packaging center'
        },
        {
          term: 'Lysosome',
          definition: 'Contains digestive enzymes that break down waste and damaged organelles.',
          example: 'Found in animal cells.',
          visual: 'üóëÔ∏è',
          remember: 'Lysosome = recycling center'
        },
        {
          term: 'Light Microscope',
          definition: 'Uses visible light. Up to ~1000x magnification.',
          example: 'Good for cells, tissues.',
          visual: 'üî¨',
          remember: 'Pros: easy/cheap. Cons: lower magnification'
        },
        {
          term: 'Electron Microscope',
          definition: 'Uses electron beams. Up to ~1,000,000x magnification.',
          example: 'Can see viruses, organelles in detail.',
          visual: '‚ö°',
          remember: 'Pros: super detailed. Cons: expensive, samples dead'
        },
      ]
    },
  ];

  // Cell identification flashcards with images
  const cellIdentificationCards = [
    {
      term: 'Identify: Cell Wall',
      definition: 'Rigid outer layer that provides structure and protection. Made of cellulose in plants.',
      image: cellImages.plant,
      highlight: 'The outermost thick green layer surrounding the entire cell',
      visual: 'üß±',
      remember: 'Outside the membrane, NOT in animal cells',
      category: 'Cell Identification'
    },
    {
      term: 'Identify: Cell Membrane',
      definition: 'Thin phospholipid bilayer that controls what enters and exits the cell.',
      image: cellImages.animal,
      highlight: 'The thin boundary layer around the cell',
      visual: 'üé≠',
      remember: 'ALL cells have a membrane',
      category: 'Cell Identification'
    },
    {
      term: 'Identify: Nucleus',
      definition: 'Large, round organelle containing DNA that controls all cell activities.',
      image: cellImages.animal,
      highlight: 'The large purple/blue circular structure in the center',
      visual: 'üß†',
      remember: 'The control center with DNA',
      category: 'Cell Identification'
    },
    {
      term: 'Identify: Ribosomes',
      definition: 'Tiny dots that make proteins. Can be free or attached to ER.',
      image: cellImages.animal,
      highlight: 'Small dots scattered throughout cytoplasm',
      visual: '‚öôÔ∏è',
      remember: 'Smallest organelles - protein makers',
      category: 'Cell Identification'
    },
    {
      term: 'Identify: Cytoplasm',
      definition: 'Gel-like fluid that fills the cell and holds organelles.',
      image: cellImages.animal,
      highlight: 'The background fluid/gel around all organelles',
      visual: 'üíß',
      remember: 'The jelly everything floats in',
      category: 'Cell Identification'
    },
    {
      term: 'Identify: Mitochondria',
      definition: 'Oval-shaped powerhouse that produces ATP energy.',
      image: cellImages.animal,
      highlight: 'Bean-shaped structures with wavy inner membranes',
      visual: '‚ö°',
      remember: 'Has inner folds called cristae',
      category: 'Cell Identification'
    },
    {
      term: 'Identify: Chloroplast',
      definition: 'Green organelle where photosynthesis occurs. Plants only.',
      image: cellImages.plant,
      highlight: 'Green oval structures with internal stacks',
      visual: 'üåø',
      remember: 'Makes glucose from sunlight',
      category: 'Cell Identification'
    },
  ];

  // Question-based flashcards (for main Flashcards mode)
  const questionFlashcards = [
    // Experimental Design Questions
    {
      question: 'In an experiment, what is the independent variable?',
      answer: 'The variable that YOU change or manipulate. Example: If testing how fertilizer type affects plant growth, the fertilizer type is the independent variable.',
      category: 'Experimental Design',
      color: 'card-gradient-blue',
      hint: 'Think: "I change this"'
    },
    {
      question: 'What is a dependent variable and how do you identify it?',
      answer: 'The variable that you MEASURE in response to changes. It depends on the independent variable. Example: In a fertilizer experiment, plant height (what you measure) is the dependent variable.',
      category: 'Experimental Design',
      color: 'card-gradient-blue',
      hint: 'What gets measured?'
    },
    {
      question: 'You\'re testing if music helps plants grow. What variables should you control?',
      answer: 'Control variables (keep constant): same plant type, same pot size, same amount of water, same light, same soil. This ensures music is the ONLY thing changing.',
      category: 'Experimental Design',
      color: 'card-gradient-blue',
      hint: 'What needs to stay the same?'
    },
    {
      question: 'Write a testable hypothesis about light and plant growth using the "If...then...because" format.',
      answer: 'If light intensity increases, then plant growth will increase, because plants need light energy for photosynthesis to make glucose.',
      category: 'Experimental Design',
      color: 'card-gradient-blue',
      hint: 'If [IV changes], then [DV changes], because [reason]'
    },

    // Data Analysis Questions
    {
      question: 'Is "flower color" qualitative or quantitative? Why?',
      answer: 'Qualitative - because color is descriptive and cannot be measured with numbers. Qualitative = qualities you observe (colors, textures, smells).',
      category: 'Data Analysis',
      color: 'card-gradient-success',
      hint: 'Can you measure it with numbers?'
    },
    {
      question: 'What\'s the difference between quantitative continuous and discontinuous data?',
      answer: 'Continuous = measured with decimals (height: 152.3 cm, temperature: 37.5¬∞C). Discontinuous = counted in whole numbers (# of students: 25, # of seeds: 18).',
      category: 'Data Analysis',
      color: 'card-gradient-success',
      hint: 'Measured vs Counted'
    },
    {
      question: 'Calculate mean, median, and mode for: 5, 8, 3, 8, 6',
      answer: 'Mean = (5+8+3+8+6)√∑5 = 6. Median = arrange (3,5,6,8,8), middle = 6. Mode = 8 (appears twice).',
      category: 'Data Analysis',
      color: 'card-gradient-success',
      hint: 'Mean=average, Median=middle, Mode=most common'
    },
    {
      question: 'Write a CER argument for: "Plants need light." Data: Plants in light grew 15cm, plants in dark grew 2cm.',
      answer: 'Claim: Plants need light to grow. Evidence: Plants in light grew 15cm while plants in dark only grew 2cm. Reasoning: Light provides energy for photosynthesis, allowing plants to make glucose for growth.',
      category: 'Data Analysis',
      color: 'card-gradient-success',
      hint: 'Claim, Evidence, Reasoning'
    },
    {
      question: 'Should you use a bar graph or line graph to show plant growth over 30 days?',
      answer: 'Line graph - because this is continuous data over time. Bar graphs are for categorical/discontinuous data. Line graphs show trends and changes.',
      category: 'Data Analysis',
      color: 'card-gradient-success',
      hint: 'Connected data = line graph'
    },

    // Atomic Structure Questions
    {
      question: 'An atom has 6 protons, 8 neutrons, and 6 electrons. What element is it? Is it an ion or isotope?',
      answer: 'Carbon (6 protons = carbon). It\'s an isotope (Carbon-14) because it has more neutrons than Carbon-12. NOT an ion because protons = electrons (neutral charge).',
      category: 'Atomic Structure',
      color: 'card-gradient-purple',
      hint: '# of protons = element'
    },
    {
      question: 'What determines the element? What determines the charge? What determines the mass?',
      answer: 'Element = # of protons. Charge = protons vs electrons (more protons = positive, more electrons = negative). Mass = protons + neutrons.',
      category: 'Atomic Structure',
      color: 'card-gradient-purple',
      hint: 'Protons, electrons, neutrons'
    },
    {
      question: 'How do you know if something is an ion? Give an example.',
      answer: 'Unequal protons and electrons = ion. Example: Na+ has 11 protons, 10 electrons (lost 1 electron = positive charge).',
      category: 'Atomic Structure',
      color: 'card-gradient-purple',
      hint: 'Protons ‚â† electrons'
    },
    {
      question: 'Carbon-12 and Carbon-14 are isotopes. What does this mean?',
      answer: 'Same element (both have 6 protons) but different numbers of neutrons. C-12 has 6 neutrons, C-14 has 8 neutrons. Isotopes = same protons, different neutrons.',
      category: 'Atomic Structure',
      color: 'card-gradient-purple',
      hint: 'Same element, different mass'
    },

    // Water & Polarity Questions
    {
      question: 'What\'s the difference between covalent and hydrogen bonds?',
      answer: 'Covalent = STRONG bonds WITHIN molecules (sharing electrons). Example: H-O bonds in H‚ÇÇO. Hydrogen = WEAK attractions BETWEEN molecules. Example: between different water molecules.',
      category: 'Water & Polarity',
      color: 'card-gradient-sky',
      hint: 'Within vs Between'
    },
    {
      question: 'Why is water polar? Draw or describe the charges.',
      answer: 'Oxygen pulls electrons closer (more electronegative), making it Œ¥‚Åª (partial negative). Hydrogens become Œ¥‚Å∫ (partial positive). Uneven charge distribution = polar.',
      category: 'Water & Polarity',
      color: 'card-gradient-sky',
      hint: 'O is greedy for electrons'
    },
    {
      question: 'Will salt (NaCl) dissolve in water? Why or why not?',
      answer: 'YES - salt is ionic/charged, making it hydrophilic (water-loving). Polar water molecules attract and surround the ions. Like dissolves like - polar dissolves polar/charged.',
      category: 'Water & Polarity',
      color: 'card-gradient-sky',
      hint: 'Polar dissolves polar'
    },
    {
      question: 'Will oil dissolve in water? Why or why not?',
      answer: 'NO - oil is nonpolar (hydrophobic = water-fearing). Water is polar. Nonpolar and polar don\'t mix. Oil molecules can\'t form hydrogen bonds with water.',
      category: 'Water & Polarity',
      color: 'card-gradient-sky',
      hint: 'Like dissolves like'
    },

    // Biological Molecules Questions
    {
      question: 'What are the 4 types of biological molecules and their functions?',
      answer: 'Carbohydrates (CHO) = quick energy. Lipids = long-term energy + membranes. Proteins (CHON) = enzymes + structure. Nucleic acids (CHONP) = genetic information.',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Carbs, Lipids, Proteins, Nucleic acids'
    },
    {
      question: 'Build a disaccharide from two glucose molecules. What reaction is this?',
      answer: 'Dehydration synthesis - two glucose molecules join together, REMOVING a water molecule (H‚ÇÇO). Glucose + Glucose ‚Üí Maltose + H‚ÇÇO. Dehydration = build + lose water.',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Building = dehydration'
    },
    {
      question: 'Break down maltose into glucose. What reaction is this?',
      answer: 'Hydrolysis - maltose breaks apart by ADDING water. Maltose + H‚ÇÇO ‚Üí Glucose + Glucose. Hydrolysis = break + add water (like digestion).',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Breaking = hydrolysis'
    },
    {
      question: 'Why are saturated fats solid and unsaturated fats liquid at room temperature?',
      answer: 'Saturated fats have NO double bonds, so fatty acid chains are STRAIGHT and pack tightly = solid (butter). Unsaturated have double bonds creating KINKS, can\'t pack tightly = liquid (oil).',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Straight vs kinked chains'
    },
    {
      question: 'What makes up a phospholipid? Why is it perfect for cell membranes?',
      answer: 'Glycerol + 2 fatty acids + phosphate group. Phosphate head = hydrophilic (loves water), fatty acid tails = hydrophobic (fear water). Forms bilayer with heads out, tails in!',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Amphipathic = both'
    },
    {
      question: 'Compare starch, glycogen, and cellulose.',
      answer: 'All are polysaccharides. Starch = plant energy storage. Glycogen = animal energy storage (highly branched). Cellulose = plant structure (cell walls, we can\'t digest).',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Storage vs structure'
    },
    {
      question: 'How does DNA differ from RNA? List 3 differences.',
      answer: '1) Sugar: DNA has deoxyribose, RNA has ribose. 2) Bases: DNA has T, RNA has U. 3) Structure: DNA is double helix, RNA is single strand.',
      category: 'Biological Molecules',
      color: 'card-gradient-violet',
      hint: 'Sugar, bases, structure'
    },

    // Enzyme Questions
    {
      question: 'How do enzymes speed up reactions? Are they consumed?',
      answer: 'Enzymes LOWER activation energy needed to start a reaction. NOT consumed - they can be reused many times! They\'re catalysts.',
      category: 'Enzymes',
      color: 'card-gradient-amber',
      hint: 'Lower energy barrier'
    },
    {
      question: 'What\'s the difference between the active site and allosteric site?',
      answer: 'Active site = where substrate binds (lock and key). Allosteric site = different spot where molecules bind to REGULATE enzyme activity (turn on/off).',
      category: 'Enzymes',
      color: 'card-gradient-amber',
      hint: 'Action vs regulation'
    },
    {
      question: 'Compare competitive and noncompetitive inhibitors.',
      answer: 'Competitive = competes for ACTIVE site, blocks substrate (looks like substrate). Noncompetitive = binds to ALLOSTERIC site, changes enzyme shape so active site doesn\'t work.',
      category: 'Enzymes',
      color: 'card-gradient-amber',
      hint: 'Block vs change shape'
    },
    {
      question: 'What happens to an enzyme at very high temperature or extreme pH?',
      answer: 'DENATURATION - enzyme loses its shape and can\'t function. Bonds break, active site changes, substrate can\'t bind. Enzyme is permanently damaged.',
      category: 'Enzymes',
      color: 'card-gradient-amber',
      hint: 'Shape is critical'
    },
    {
      question: 'Why is enzyme-substrate specificity called "lock and key"?',
      answer: 'Active site (lock) has a specific shape that only fits a specific substrate (key). Specific shape = specific function. Wrong substrate won\'t fit.',
      category: 'Enzymes',
      color: 'card-gradient-amber',
      hint: 'Specific fit'
    },

    // Cell Questions
    {
      question: 'State the three parts of cell theory.',
      answer: '1) All living things are made of cells. 2) Cells are the basic unit of life. 3) All cells come from pre-existing cells.',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Foundation of biology'
    },
    {
      question: 'Compare prokaryotic and eukaryotic cells - give 3 differences.',
      answer: '1) Nucleus: Prokaryotes NO nucleus, Eukaryotes HAVE nucleus. 2) Size: Prokaryotes smaller (1-10 Œºm), Eukaryotes larger (10-100 Œºm). 3) Examples: Prokaryotes = bacteria, Eukaryotes = animals/plants.',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Nucleus, size, complexity'
    },
    {
      question: 'Which organelles are found ONLY in plant cells?',
      answer: 'Cell wall (rigid, cellulose), chloroplasts (photosynthesis), large central vacuole (storage). Animals DON\'T have these!',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Plants are unique'
    },
    {
      question: 'What do mitochondria and chloroplasts have in common?',
      answer: 'Both are energy organelles! Mitochondria make ATP (cellular respiration). Chloroplasts make glucose (photosynthesis). Both have double membranes.',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Energy makers'
    },
    {
      question: 'Describe the function of: nucleus, ribosome, and ER.',
      answer: 'Nucleus = contains DNA, controls cell. Ribosome = makes proteins. ER = transport system (Rough ER has ribosomes for proteins, Smooth ER makes lipids).',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Control, make, transport'
    },
    {
      question: 'What\'s the difference between cell membrane and cell wall?',
      answer: 'Cell membrane = thin phospholipid bilayer, ALL cells have it, controls what enters/exits. Cell wall = thick rigid layer OUTSIDE membrane, only in plants/bacteria/fungi, provides structure.',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'All cells vs some cells'
    },
    {
      question: 'Compare light microscope and electron microscope.',
      answer: 'Light: uses visible light, ~1000x magnification, can view LIVING cells, affordable. Electron: uses electron beams, ~1,000,000x magnification, samples must be DEAD, very expensive.',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Living vs detailed'
    },
    {
      question: 'What are flagella and cilia? How are they different?',
      answer: 'Both are for movement. Flagella = long whip-like structures (FEW of them) - example: sperm. Cilia = short hair-like structures (MANY of them) - example: lung cells.',
      category: 'Cells',
      color: 'card-gradient-rose',
      hint: 'Long & few vs short & many'
    },
  ];

  // Comprehensive question bank with images
  const questionBank = [
    // Experimental Design
    {
      category: 'Experimental Design',
      type: 'multiple-choice',
      question: 'In an experiment testing how fertilizer affects plant growth, what is the independent variable?',
      options: ['Plant height', 'Type of fertilizer', 'Amount of water', 'Soil type'],
      correct: 1,
      explanation: 'The independent variable is what YOU change or manipulate. In this case, it\'s the type of fertilizer being tested.',
      difficulty: 'easy'
    },
    {
      category: 'Experimental Design',
      type: 'multiple-choice',
      question: 'What is the dependent variable in an experiment testing how temperature affects enzyme activity?',
      options: ['Temperature', 'Enzyme activity', 'pH level', 'Time'],
      correct: 1,
      explanation: 'The dependent variable is what you MEASURE. Here, you measure enzyme activity in response to temperature changes.',
      difficulty: 'easy'
    },
    {
      category: 'Experimental Design',
      type: 'multiple-choice',
      question: 'Which variables should be controlled in a plant growth experiment?',
      options: ['Independent variables only', 'Dependent variables only', 'Variables that need to stay constant', 'No variables need control'],
      correct: 2,
      explanation: 'Control variables are kept constant to ensure the test is fair. Examples: same soil, water, pot size.',
      difficulty: 'medium'
    },

    // Data Analysis
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'Which type of data is "the color of flowers"?',
      options: ['Quantitative continuous', 'Quantitative discontinuous', 'Qualitative', 'Ranked'],
      correct: 2,
      explanation: 'Color is descriptive and cannot be measured with numbers, making it qualitative data.',
      difficulty: 'easy'
    },
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'What is the mean of this data set: 4, 7, 9, 2, 8?',
      options: ['5', '6', '7', '8'],
      correct: 1,
      explanation: 'Mean = (4+7+9+2+8) √∑ 5 = 30 √∑ 5 = 6',
      difficulty: 'easy'
    },
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'What is the median of: 3, 7, 2, 9, 5?',
      options: ['3', '5', '7', '9'],
      correct: 1,
      explanation: 'First arrange in order: 2, 3, 5, 7, 9. The middle value is 5.',
      difficulty: 'medium'
    },
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'Number of students in a class is what type of data?',
      options: ['Qualitative', 'Quantitative continuous', 'Quantitative discontinuous', 'Ranked'],
      correct: 2,
      explanation: 'You COUNT students in whole numbers only, making it quantitative discontinuous (discrete).',
      difficulty: 'medium'
    },

    // Atomic Structure
    {
      category: 'Atomic Structure',
      type: 'multiple-choice',
      question: 'An atom has 6 protons, 6 neutrons, and 6 electrons. What element is this?',
      options: ['Oxygen', 'Carbon', 'Nitrogen', 'Boron'],
      correct: 1,
      explanation: 'The number of protons determines the element. 6 protons = Carbon (C).',
      difficulty: 'easy'
    },
    {
      category: 'Atomic Structure',
      type: 'multiple-choice',
      question: 'If an atom has 11 protons and 10 electrons, is it neutral or charged?',
      options: ['Neutral', 'Positively charged', 'Negatively charged', 'Cannot determine'],
      correct: 1,
      explanation: 'More protons (11) than electrons (10) means it has a +1 charge. This is Na‚Å∫ (sodium ion).',
      difficulty: 'medium'
    },
    {
      category: 'Atomic Structure',
      type: 'multiple-choice',
      question: 'Carbon-12 and Carbon-14 are examples of:',
      options: ['Different elements', 'Isotopes', 'Ions', 'Molecules'],
      correct: 1,
      explanation: 'Isotopes are atoms of the same element with different numbers of neutrons. Both have 6 protons but different neutrons.',
      difficulty: 'medium'
    },

    // Water & Polarity
    {
      category: 'Water & Polarity',
      type: 'multiple-choice',
      question: 'What type of bond connects oxygen and hydrogen atoms WITHIN a water molecule?',
      options: ['Hydrogen bond', 'Ionic bond', 'Covalent bond', 'Peptide bond'],
      correct: 2,
      explanation: 'Covalent bonds form within molecules by sharing electrons. Hydrogen bonds form BETWEEN molecules.',
      difficulty: 'easy'
    },
    {
      category: 'Water & Polarity',
      type: 'multiple-choice',
      question: 'In a water molecule, which atom has a partial negative charge (Œ¥‚Åª)?',
      options: ['Hydrogen', 'Oxygen', 'Both equally', 'Neither'],
      correct: 1,
      explanation: 'Oxygen is more electronegative, pulling electrons closer and becoming Œ¥‚Åª. Hydrogens become Œ¥‚Å∫.',
      difficulty: 'medium'
    },
    {
      category: 'Water & Polarity',
      type: 'true-false',
      question: 'Hydrogen bonds are stronger than covalent bonds.',
      correct: false,
      explanation: 'False! Hydrogen bonds are weak intermolecular forces. Covalent bonds (within molecules) are much stronger.',
      difficulty: 'medium'
    },

    // Biological Molecules
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'What is the monomer of a carbohydrate?',
      options: ['Amino acid', 'Nucleotide', 'Monosaccharide', 'Fatty acid'],
      correct: 2,
      explanation: 'Monosaccharides (simple sugars like glucose) are the monomers of carbohydrates.',
      difficulty: 'easy'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'Which polysaccharide is used for energy storage in plants?',
      options: ['Glycogen', 'Cellulose', 'Starch', 'Chitin'],
      correct: 2,
      explanation: 'Starch is how plants store glucose. Glycogen is animal storage, cellulose is structure.',
      difficulty: 'easy'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'Saturated fats have:',
      options: ['Double bonds and are liquid', 'No double bonds and are solid', 'Double bonds and are solid', 'Many double bonds'],
      correct: 1,
      explanation: 'Saturated = saturated with hydrogen = no double bonds. Straight chains pack tightly = solid at room temp.',
      difficulty: 'medium'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'What makes up a phospholipid?',
      options: ['Glycerol + 3 fatty acids', 'Glycerol + 2 fatty acids + phosphate', '4 fused rings', 'Amino acids'],
      correct: 1,
      explanation: 'Phospholipids have glycerol + 2 fatty acids (hydrophobic tails) + phosphate group (hydrophilic head).',
      difficulty: 'medium'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'What type of reaction breaks down polymers?',
      options: ['Dehydration synthesis', 'Hydrolysis', 'Condensation', 'Photosynthesis'],
      correct: 1,
      explanation: 'Hydrolysis adds water to break bonds, separating polymers into monomers (like digestion).',
      difficulty: 'medium'
    },
    {
      category: 'Biological Molecules',
      type: 'true-false',
      question: 'DNA contains the sugar ribose.',
      correct: false,
      explanation: 'False! DNA contains DEOXYribose. RNA contains ribose.',
      difficulty: 'easy'
    },

    // Enzymes
    {
      category: 'Enzymes',
      type: 'multiple-choice',
      question: 'How do enzymes speed up reactions?',
      options: ['By raising activation energy', 'By lowering activation energy', 'By being consumed', 'By changing products'],
      correct: 1,
      explanation: 'Enzymes lower the activation energy needed to start a reaction, making it happen faster.',
      difficulty: 'easy'
    },
    {
      category: 'Enzymes',
      type: 'multiple-choice',
      question: 'Where does the substrate bind on an enzyme?',
      options: ['Allosteric site', 'Active site', 'Ribosome', 'Cell membrane'],
      correct: 1,
      explanation: 'The substrate binds to the active site, which is specifically shaped to fit that substrate.',
      difficulty: 'easy'
    },
    {
      category: 'Enzymes',
      type: 'multiple-choice',
      question: 'What happens when an enzyme is denatured?',
      options: ['It works faster', 'It loses its shape and stops working', 'It duplicates', 'It becomes an inhibitor'],
      correct: 1,
      explanation: 'Denaturation breaks bonds holding enzyme shape, causing loss of function.',
      difficulty: 'medium'
    },
    {
      category: 'Enzymes',
      type: 'true-false',
      question: 'Enzymes are consumed in the reactions they catalyze.',
      correct: false,
      explanation: 'False! Enzymes are NOT consumed - they can be reused many times.',
      difficulty: 'easy'
    },

    // Cells
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'Which type of cell has a nucleus?',
      options: ['Prokaryotic only', 'Eukaryotic only', 'Both', 'Neither'],
      correct: 1,
      explanation: 'Only eukaryotic cells have a membrane-bound nucleus. Prokaryotes have DNA floating in cytoplasm.',
      difficulty: 'easy'
    },
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'Which organelle is found in plant cells but NOT animal cells?',
      options: ['Nucleus', 'Mitochondria', 'Chloroplast', 'Ribosome'],
      correct: 2,
      explanation: 'Chloroplasts (for photosynthesis) are found in plant cells, not animal cells.',
      difficulty: 'easy'
    },
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'Bacteria are classified as:',
      options: ['Eukaryotic', 'Prokaryotic', 'Viruses', 'Multicellular'],
      correct: 1,
      explanation: 'Bacteria are prokaryotes - they lack a nucleus and membrane-bound organelles.',
      difficulty: 'easy'
    },
    {
      category: 'Cells',
      type: 'true-false',
      question: 'All cells have ribosomes.',
      correct: true,
      explanation: 'True! Both prokaryotic and eukaryotic cells have ribosomes to make proteins.',
      difficulty: 'medium'
    },
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'What is the main advantage of an electron microscope?',
      options: ['Cheaper', 'Can view living cells', 'Much higher magnification', 'Easier to use'],
      correct: 2,
      explanation: 'Electron microscopes can magnify up to 1,000,000x with high detail, though samples must be dead.',
      difficulty: 'medium'
    },
  ];

  // Comparison tables data
  const comparisons = {
    dnarna: {
      title: 'DNA vs RNA',
      headers: ['Feature', 'DNA', 'RNA'],
      rows: [
        ['Sugar', 'Deoxyribose', 'Ribose'],
        ['Bases', 'A, T, G, C', 'A, U, G, C'],
        ['Structure', 'Double helix', 'Single strand'],
        ['Location', 'Nucleus', 'Nucleus & cytoplasm'],
        ['Function', 'Store genetic info', 'Make proteins'],
        ['Stability', 'Very stable', 'Less stable'],
      ]
    },
    cells: {
      title: 'Prokaryotic vs Eukaryotic Cells',
      headers: ['Feature', 'Prokaryotic', 'Eukaryotic'],
      rows: [
        ['Nucleus', '‚ùå No', '‚úÖ Yes'],
        ['Size', 'Small (1-10 Œºm)', 'Large (10-100 Œºm)'],
        ['DNA', 'Circular, in cytoplasm', 'Linear, in nucleus'],
        ['Organelles', 'No membrane-bound', 'Has membrane-bound'],
        ['Ribosomes', '‚úÖ Yes (smaller)', '‚úÖ Yes (larger)'],
        ['Examples', 'Bacteria, Archaea', 'Animals, Plants, Fungi'],
      ]
    },
    polysaccharides: {
      title: 'Starch vs Glycogen vs Cellulose',
      headers: ['Feature', 'Starch', 'Glycogen', 'Cellulose'],
      rows: [
        ['Found in', 'üå± Plants', 'ü¶¥ Animals', 'üå≥ Plant walls'],
        ['Function', 'Energy storage', 'Energy storage', 'Structural support'],
        ['Branching', 'Some branches', 'Highly branched', 'No branches'],
        ['Digestible?', '‚úÖ Yes (humans)', '‚úÖ Yes', '‚ùå No (humans)'],
        ['Structure', 'Œ±-glucose chains', 'Œ±-glucose chains', 'Œ≤-glucose chains'],
      ]
    },
    lipids: {
      title: 'Triglyceride vs Phospholipid vs Steroid',
      headers: ['Feature', 'Triglyceride', 'Phospholipid', 'Steroid'],
      rows: [
        ['Structure', 'Glycerol + 3 fatty acids', 'Glycerol + 2 fatty acids + PO‚ÇÑ', '4 fused rings'],
        ['Function', 'Energy storage', 'Cell membranes', 'Hormones'],
        ['Polarity', 'Nonpolar (hydrophobic)', 'Amphipathic', 'Mostly nonpolar'],
        ['Examples', 'Fats, oils', 'Membrane lipids', 'Cholesterol, testosterone'],
      ]
    },
    microscopes: {
      title: 'Light vs Electron Microscope',
      headers: ['Feature', 'Light Microscope', 'Electron Microscope'],
      rows: [
        ['Uses', 'Visible light', 'Electron beams'],
        ['Max Magnification', '~1,000x', '~1,000,000x'],
        ['Resolution', 'Lower', 'Much higher'],
        ['Living samples?', '‚úÖ Yes', '‚ùå No (must be dead)'],
        ['Cost', 'üí∞ Affordable', 'üí∞üí∞üí∞ Very expensive'],
        ['Can see', 'Cells, bacteria', 'Viruses, organelles, molecules'],
      ]
    },
  };

  const initializeTest = (questions = null) => {
    const questionsToUse = questions || questionBank;
    const shuffled = [...questionsToUse].sort(() => Math.random() - 0.5).slice(0, 20);
    setTestQuestions(shuffled);
    setCurrentQuestion(0);
    setUserAnswers({});
    setShowResults(false);
  };

  useEffect(() => {
    if (mode === 'test') {
      initializeTest();
    }
  }, [mode]);

  const handleTestAnswer = (answer) => {
    setUserAnswers({...userAnswers, [currentQuestion]: answer});
  };

  const calculateTestScore = () => {
    let correct = 0;
    const mistakes = [];

    testQuestions.forEach((q, idx) => {
      const isCorrect = q.type === 'multiple-choice'
        ? userAnswers[idx] === q.correct
        : userAnswers[idx] === q.correct;

      if (isCorrect) {
        correct++;
      } else {
        mistakes.push({...q, userAnswer: userAnswers[idx], questionIndex: idx});
      }
    });

    return {
      correct,
      total: testQuestions.length,
      percentage: Math.round((correct / testQuestions.length) * 100),
      mistakes
    };
  };

  const handleSubmitTest = () => {
    const results = calculateTestScore();
    // Save mistakes to mistake bank
    if (results.mistakes.length > 0) {
      const updatedBank = [...mistakeBank, ...results.mistakes];
      saveMistakeBank(updatedBank);
    }
    setShowResults(true);
  };

  // Menu Screen
  const MenuScreen = () => (
    <div className="min-h-screen p-4 pt-20">
      {/* Breadcrumbs */}
      <div className="max-w-7xl mx-auto mb-6">
        <div className="flex items-center space-x-2 text-white/60 text-sm">
          <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
          <span>/</span>
          <span className="text-white font-semibold">Bio Quiz #3</span>
        </div>
      </div>

      <div className="max-w-7xl mx-auto">
        {/* Hero Section */}
        <div className="text-center mb-12 fade-in">
          <div className="text-8xl mb-6">üß¨</div>
          <h1 className="heading-lg gradient-text mb-4">Bio Quiz #3</h1>
          <p className="body-lg text-white/70 max-w-2xl mx-auto">
            Complete visual study guide with interactive diagrams, concept maps, and comprehensive practice
          </p>
        </div>

        {/* Quick Stats */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <div className="stat-card">
            <div className="stat-icon">‚ùì</div>
            <div className="stat-value">{questionFlashcards.length + cellIdentificationCards.length}</div>
            <div className="stat-label">Question Cards</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üìñ</div>
            <div className="stat-value">{topicCategories.reduce((sum, cat) => sum + cat.concepts.length, 0)}</div>
            <div className="stat-label">Definitions</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üìù</div>
            <div className="stat-value">{questionBank.length}</div>
            <div className="stat-label">Practice Questions</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üó∫Ô∏è</div>
            <div className="stat-value">7</div>
            <div className="stat-label">Topics</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üéØ</div>
            <div className="stat-value">{mistakeBank.length}</div>
            <div className="stat-label">Mistakes Tracked</div>
          </div>
        </div>

        {/* Main Study Modes */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <button
            onClick={() => setMode('learn')}
            className="card-gradient-violet p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üìö</div>
            <h3 className="text-2xl font-bold text-white mb-2">Learn Mode</h3>
            <p className="text-white/70 mb-4">Quick facts, concept maps, and visual guides</p>
            <div className="flex items-center text-purple-300 text-sm font-semibold">
              Start Learning ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('definitions')}
            className="card-gradient-success p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üìñ</div>
            <h3 className="text-2xl font-bold text-white mb-2">Definitions</h3>
            <p className="text-white/70 mb-4">All terms with examples (Learn + Flashcard modes)</p>
            <div className="flex items-center text-green-300 text-sm font-semibold">
              Browse Definitions ‚Üí
            </div>
          </button>

          <button
            onClick={() => { setMode('flashcards'); setCurrentCard(0); setIsFlipped(false); }}
            className="card-gradient-blue p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">‚ùì</div>
            <h3 className="text-2xl font-bold text-white mb-2">Question Flashcards</h3>
            <p className="text-white/70 mb-4">Question-based practice + cell identification</p>
            <div className="flex items-center text-blue-300 text-sm font-semibold">
              Start Practicing ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('compare')}
            className="card-gradient-sky p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">‚öñÔ∏è</div>
            <h3 className="text-2xl font-bold text-white mb-2">Compare & Contrast</h3>
            <p className="text-white/70 mb-4">Side-by-side visual comparisons</p>
            <div className="flex items-center text-cyan-300 text-sm font-semibold">
              Compare Now ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('test')}
            className="card-gradient-amber p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">‚úçÔ∏è</div>
            <h3 className="text-2xl font-bold text-white mb-2">Practice Test</h3>
            <p className="text-white/70 mb-4">20 questions with instant feedback</p>
            <div className="flex items-center text-yellow-300 text-sm font-semibold">
              Take Test ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('mistakes')}
            className="card-gradient-rose p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üéØ</div>
            <h3 className="text-2xl font-bold text-white mb-2">Mistake Bank</h3>
            <p className="text-white/70 mb-4">Review and retry wrong answers</p>
            <div className="flex items-center text-rose-300 text-sm font-semibold">
              {mistakeBank.length > 0 ? `Review ${mistakeBank.length} mistakes ‚Üí` : 'No mistakes yet! ‚Üí'}
            </div>
          </button>
        </div>
      </div>
    </div>
  );

  // Learn Mode with Quick Facts and Concept Maps
  const LearnMode = () => (
    <div className="min-h-screen p-4 pt-20">
      <div className="max-w-7xl mx-auto">
        {/* Breadcrumbs */}
        <div className="flex items-center justify-between mb-6">
          <div className="flex items-center space-x-2 text-white/60 text-sm">
            <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
            <span>/</span>
            <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
            <span>/</span>
            <span className="text-white font-semibold">Learn Mode</span>
          </div>
          <button onClick={() => setMode('menu')} className="btn-secondary btn-small">
            ‚Üê Back
          </button>
        </div>

        <h1 className="heading-md gradient-text mb-8">üß† Learn Mode</h1>

        {/* Quick Reference Facts */}
        <div className="card mb-8 p-8">
          <h2 className="text-2xl font-bold text-white mb-4">‚ö° Quick Reference Facts</h2>
          <p className="text-white/70 mb-6">Facts that are easy to forget - memorize these!</p>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {quickFacts.map((item, idx) => (
              <div key={idx} className="card-gradient-accent p-4 rounded-xl">
                <div className="flex items-start gap-3">
                  <div className="text-3xl">{item.emoji}</div>
                  <div>
                    <div className="text-white font-bold text-lg mb-1">{item.fact}</div>
                    <div className="badge badge-purple">{item.category}</div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Concept Maps with SVG Lines */}
        <div className="card mb-8 p-8">
          <h2 className="text-2xl font-bold text-white mb-6">üó∫Ô∏è Concept Map: Biological Molecules</h2>
          <div className="bg-black/20 rounded-2xl p-8 relative">
            <svg className="absolute inset-0 w-full h-full" style={{pointerEvents: 'none'}}>
              {/* Lines from center to each category */}
              <line x1="50%" y1="12%" x2="12%" y2="35%" stroke="rgba(168, 85, 247, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
              <line x1="50%" y1="12%" x2="30%" y2="35%" stroke="rgba(168, 85, 247, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
              <line x1="50%" y1="12%" x2="70%" y2="35%" stroke="rgba(168, 85, 247, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
              <line x1="50%" y1="12%" x2="88%" y2="35%" stroke="rgba(168, 85, 247, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
            </svg>
            <div className="flex flex-col items-center gap-12 relative">
              {/* Central concept */}
              <div className="card-gradient-violet p-6 rounded-2xl text-center concept-node shadow-2xl">
                <div className="text-4xl mb-2">üß¨</div>
                <div className="text-white font-bold text-xl">Biological Molecules</div>
              </div>

              {/* Main categories with subconcepts */}
              <div className="grid grid-cols-2 md:grid-cols-4 gap-8 w-full max-w-6xl">
                {/* Carbohydrates */}
                <div className="flex flex-col items-center">
                  <div className="card-gradient-amber p-4 rounded-xl concept-node shadow-lg mb-3 w-full text-center">
                    <div className="text-2xl mb-2">üçû</div>
                    <div className="text-white font-bold">Carbohydrates</div>
                    <div className="text-white/70 text-sm mt-1">CHO (1:2:1)</div>
                  </div>
                  <div className="space-y-2 text-sm text-white/90 w-full">
                    <div className="bg-yellow-500/10 border-l-2 border-yellow-500 pl-3 py-1">Monosaccharide</div>
                    <div className="bg-yellow-500/10 border-l-2 border-yellow-500 pl-3 py-1">Disaccharide</div>
                    <div className="bg-yellow-500/10 border-l-2 border-yellow-500 pl-3 py-1">Polysaccharide</div>
                  </div>
                </div>

                {/* Lipids */}
                <div className="flex flex-col items-center">
                  <div className="card-gradient-rose p-4 rounded-xl concept-node shadow-lg mb-3 w-full text-center">
                    <div className="text-2xl mb-2">üßà</div>
                    <div className="text-white font-bold">Lipids</div>
                    <div className="text-white/70 text-sm mt-1">Hydrophobic</div>
                  </div>
                  <div className="space-y-2 text-sm text-white/90 w-full">
                    <div className="bg-rose-500/10 border-l-2 border-rose-500 pl-3 py-1">Triglyceride</div>
                    <div className="bg-rose-500/10 border-l-2 border-rose-500 pl-3 py-1">Phospholipid</div>
                    <div className="bg-rose-500/10 border-l-2 border-rose-500 pl-3 py-1">Steroid</div>
                  </div>
                </div>

                {/* Proteins */}
                <div className="flex flex-col items-center">
                  <div className="card-gradient-purple p-4 rounded-xl concept-node shadow-lg mb-3 w-full text-center">
                    <div className="text-2xl mb-2">üîó</div>
                    <div className="text-white font-bold">Proteins</div>
                    <div className="text-white/70 text-sm mt-1">CHON(S)</div>
                  </div>
                  <div className="space-y-2 text-sm text-white/90 w-full">
                    <div className="bg-purple-500/10 border-l-2 border-purple-500 pl-3 py-1">Amino acids</div>
                    <div className="bg-purple-500/10 border-l-2 border-purple-500 pl-3 py-1">Peptide bonds</div>
                    <div className="bg-purple-500/10 border-l-2 border-purple-500 pl-3 py-1">4 structures</div>
                  </div>
                </div>

                {/* Nucleic Acids */}
                <div className="flex flex-col items-center">
                  <div className="card-gradient-blue p-4 rounded-xl concept-node shadow-lg mb-3 w-full text-center">
                    <div className="text-2xl mb-2">üß¨</div>
                    <div className="text-white font-bold">Nucleic Acids</div>
                    <div className="text-white/70 text-sm mt-1">CHONP</div>
                  </div>
                  <div className="space-y-2 text-sm text-white/90 w-full">
                    <div className="bg-blue-500/10 border-l-2 border-blue-500 pl-3 py-1">Nucleotides</div>
                    <div className="bg-blue-500/10 border-l-2 border-blue-500 pl-3 py-1">DNA / RNA</div>
                    <div className="bg-blue-500/10 border-l-2 border-blue-500 pl-3 py-1">ATP</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Enzyme Concept Map with SVG */}
        <div className="card p-8">
          <h2 className="text-2xl font-bold text-white mb-6">‚ö° Concept Map: Enzymes</h2>
          <div className="bg-black/20 rounded-2xl p-8 relative">
            <svg className="absolute inset-0 w-full h-full" style={{pointerEvents: 'none'}}>
              {/* Lines from center to categories */}
              <line x1="50%" y1="15%" x2="16%" y2="50%" stroke="rgba(245, 158, 11, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
              <line x1="50%" y1="15%" x2="50%" y2="50%" stroke="rgba(245, 158, 11, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
              <line x1="50%" y1="15%" x2="84%" y2="50%" stroke="rgba(245, 158, 11, 0.4)" strokeWidth="2" strokeDasharray="5,5"/>
            </svg>
            <div className="flex flex-col items-center gap-12 relative">
              <div className="card-gradient-amber p-6 rounded-2xl text-center concept-node shadow-2xl">
                <div className="text-4xl mb-2">‚ö°</div>
                <div className="text-white font-bold text-xl">ENZYME</div>
                <div className="text-white/70 text-sm mt-2">Biological Catalyst</div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl">
                <div className="card-gradient-success p-5 rounded-xl shadow-lg">
                  <div className="text-white font-bold mb-3 text-lg">‚úÖ Function</div>
                  <ul className="text-white/90 text-sm space-y-2">
                    <li className="flex items-start gap-2">
                      <span className="text-green-400">‚Üí</span>
                      <span>Speeds up reactions</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-green-400">‚Üí</span>
                      <span>Lowers activation energy</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-green-400">‚Üí</span>
                      <span>NOT consumed</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-green-400">‚Üí</span>
                      <span>Reusable</span>
                    </li>
                  </ul>
                </div>

                <div className="card-gradient-blue p-5 rounded-xl shadow-lg">
                  <div className="text-white font-bold mb-3 text-lg">üéØ Structure</div>
                  <ul className="text-white/90 text-sm space-y-2">
                    <li className="flex items-start gap-2">
                      <span className="text-blue-400">‚Üí</span>
                      <span>Active site binds substrate</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-blue-400">‚Üí</span>
                      <span>Allosteric site regulates</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-blue-400">‚Üí</span>
                      <span>Specific shape = function</span>
                    </li>
                  </ul>
                </div>

                <div className="card-gradient-rose p-5 rounded-xl shadow-lg">
                  <div className="text-white font-bold mb-3 text-lg">‚ö†Ô∏è Factors</div>
                  <ul className="text-white/90 text-sm space-y-2">
                    <li className="flex items-start gap-2">
                      <span className="text-rose-400">‚Üí</span>
                      <span>Temperature (~37¬∞C)</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-rose-400">‚Üí</span>
                      <span>pH level</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-rose-400">‚Üí</span>
                      <span>Substrate concentration</span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="text-rose-400">‚Üí</span>
                      <span>Inhibitors</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );

  // Flashcards Mode with 3D Flip - QUESTIONS + CELL ID
  const FlashcardsMode = () => {
    // Use question flashcards + cell identification cards
    const allCards = [...questionFlashcards, ...cellIdentificationCards];
    const card = allCards[currentCard];

    return (
      <div className="min-h-screen p-4 pt-20">
        <div className="max-w-5xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center space-x-2 text-white/60 text-sm">
              <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
              <span>/</span>
              <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
              <span>/</span>
              <span className="text-white font-semibold">Flashcards</span>
            </div>
            <button onClick={() => setMode('menu')} className="btn-secondary btn-small">‚Üê Back</button>
          </div>

          <div className="text-center mb-6">
            <div className="badge badge-accent mb-2">Card {currentCard + 1} / {allCards.length}</div>
            {card.image && <div className="badge badge-purple ml-2">üì∑ Photo ID</div>}
            {card.question && <div className="badge badge-accent ml-2">‚ùì Question</div>}
          </div>

          {/* 3D Flashcard */}
          <div className="flashcard-3d mb-8" onClick={() => setIsFlipped(!isFlipped)}>
            <div className={`flashcard-inner ${isFlipped ? 'flipped' : ''}`} style={{position: 'relative', minHeight: '500px'}}>
              {/* Front */}
              <div className="flashcard-front absolute inset-0" style={{backfaceVisibility: 'hidden'}}>
                <div className={`${card.color || 'card-gradient-blue'} p-8 rounded-3xl shadow-2xl cursor-pointer h-full flex flex-col items-center justify-center`}>
                  {card.image ? (
                    // Image-based identification card
                    <>
                      <div className="badge badge-purple mb-4">{card.category}</div>
                      <div className="bg-white rounded-2xl p-6 mb-4 w-full max-w-md">
                        <img
                          src={card.image}
                          alt="Cell diagram for identification"
                          className="w-full h-auto"
                          style={{maxHeight: '300px', objectFit: 'contain'}}
                        />
                      </div>
                      <h2 className="text-3xl font-bold text-white text-center mb-2">{card.term}</h2>
                      <p className="text-white/70 text-center text-sm mb-2">{card.highlight}</p>
                      <p className="text-white/70 text-lg">Click to flip ‚Üí</p>
                    </>
                  ) : (
                    // Question card
                    <>
                      <div className="badge badge-purple mb-4">{card.category}</div>
                      <div className="text-6xl mb-6">‚ùì</div>
                      <h2 className="text-3xl font-bold text-white text-center mb-4 px-6">{card.question}</h2>
                      {card.hint && (
                        <div className="bg-white/10 px-4 py-2 rounded-lg mb-4">
                          <span className="text-white/70 text-sm">üí° Hint: {card.hint}</span>
                        </div>
                      )}
                      <p className="text-white/70 text-lg">Click to flip ‚Üí</p>
                    </>
                  )}
                </div>
              </div>

              {/* Back */}
              <div className="flashcard-back absolute inset-0" style={{backfaceVisibility: 'hidden', transform: 'rotateY(180deg)'}}>
                <div className="card p-8 h-full overflow-y-auto">
                  {card.image ? (
                    // Image card back
                    <>
                      <div className="flex items-center gap-3 mb-6">
                        <div className="text-5xl">{card.visual}</div>
                        <div>
                          <h3 className="text-2xl font-bold text-white">{card.term}</h3>
                          <div className="badge badge-purple mt-2">{card.category}</div>
                        </div>
                      </div>
                      <div className="space-y-4">
                        <div className="bg-blue-500/10 border border-blue-500/30 p-4 rounded-xl">
                          <div className="text-blue-300 font-bold mb-2">üìñ Definition</div>
                          <p className="text-white/90">{card.definition}</p>
                        </div>
                        <div className="bg-purple-500/10 border border-purple-500/30 p-4 rounded-xl">
                          <div className="text-purple-300 font-bold mb-2">üéØ Remember</div>
                          <p className="text-white/90 font-semibold">{card.remember}</p>
                        </div>
                      </div>
                    </>
                  ) : (
                    // Question card back
                    <>
                      <div className="mb-6">
                        <div className="badge badge-purple mb-3">{card.category}</div>
                        <h3 className="text-xl font-bold text-white mb-4">‚ùì {card.question}</h3>
                      </div>
                      <div className="bg-green-500/10 border-2 border-green-500/50 p-6 rounded-xl">
                        <div className="text-green-300 font-bold mb-3 text-lg">‚úÖ Answer</div>
                        <p className="text-white/95 text-lg leading-relaxed">{card.answer}</p>
                      </div>
                    </>
                  )}
                </div>
              </div>
            </div>
          </div>

          {/* Navigation */}
          <div className="flex justify-between items-center">
            <button
              onClick={() => { setCurrentCard(Math.max(0, currentCard - 1)); setIsFlipped(false); }}
              disabled={currentCard === 0}
              className="btn-secondary disabled:opacity-30"
            >
              ‚Üê Previous
            </button>
            <button onClick={() => setIsFlipped(!isFlipped)} className="btn-primary">
              {isFlipped ? 'Show Front' : 'Show Back'}
            </button>
            <button
              onClick={() => { setCurrentCard(Math.min(allCards.length - 1, currentCard + 1)); setIsFlipped(false); }}
              disabled={currentCard === allCards.length - 1}
              className="btn-secondary disabled:opacity-30"
            >
              Next ‚Üí
            </button>
          </div>

          {/* Category Jump */}
          <div className="card p-6 mt-8">
            <h3 className="text-white font-bold mb-4">Jump to Category</h3>
            <div className="flex flex-wrap gap-3">
              {['Experimental Design', 'Data Analysis', 'Atomic Structure', 'Water & Polarity', 'Biological Molecules', 'Enzymes', 'Cells'].map((cat, idx) => {
                const catIndex = allCards.findIndex(c => c.category === cat);
                if (catIndex === -1) return null;
                return (
                  <button
                    key={idx}
                    onClick={() => { setCurrentCard(catIndex); setIsFlipped(false); }}
                    className="btn-secondary btn-small"
                  >
                    {cat}
                  </button>
                );
              })}
              <button
                onClick={() => { setCurrentCard(questionFlashcards.length); setIsFlipped(false); }}
                className="btn-secondary btn-small"
              >
                üì∑ Cell ID Cards
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Definitions Mode - with Learn and Flashcard views
  const DefinitionsMode = () => {
    const allDefinitions = topicCategories.flatMap(cat =>
      cat.concepts.map(c => ({ ...c, category: cat.name, icon: cat.icon, color: cat.color }))
    );
    const currentDef = allDefinitions[currentCard];

    if (definitionsView === 'learn') {
      // Learn view - show all definitions organized by topic
      return (
        <div className="min-h-screen p-4 pt-20">
          <div className="max-w-7xl mx-auto">
            <div className="flex items-center justify-between mb-6">
              <div className="flex items-center space-x-2 text-white/60 text-sm">
                <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
                <span>/</span>
                <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
                <span>/</span>
                <span className="text-white font-semibold">Definitions</span>
              </div>
              <div className="flex gap-3">
                <button onClick={() => setDefinitionsView('flashcard')} className="btn-secondary btn-small">
                  üé¥ Flashcard View
                </button>
                <button onClick={() => setMode('menu')} className="btn-secondary btn-small">‚Üê Back</button>
              </div>
            </div>

            <h1 className="heading-md gradient-text mb-8 text-center">üìñ Definitions</h1>

            {/* Show all definitions by topic */}
            {topicCategories.map((topic, topicIdx) => (
              <div key={topicIdx} className="card mb-6 p-6">
                <div className="flex items-center gap-3 mb-6">
                  <div className="text-4xl">{topic.icon}</div>
                  <h2 className="text-2xl font-bold text-white">{topic.name}</h2>
                  <div className="badge badge-accent">{topic.concepts.length} terms</div>
                </div>

                <div className="grid md:grid-cols-2 gap-4">
                  {topic.concepts.map((concept, idx) => (
                    <div key={idx} className={`${topic.color} p-4 rounded-xl`}>
                      <div className="flex items-start gap-3 mb-2">
                        <div className="text-3xl">{concept.visual}</div>
                        <div className="flex-1">
                          <h3 className="text-lg font-bold text-white mb-2">{concept.term}</h3>
                          <p className="text-white/90 text-sm mb-2">{concept.definition}</p>
                          <div className="bg-white/10 rounded px-2 py-1 text-xs text-white/80">
                            üí° {concept.remember}
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      );
    } else {
      // Flashcard view - traditional flip cards for definitions
      return (
        <div className="min-h-screen p-4 pt-20">
          <div className="max-w-5xl mx-auto">
            <div className="flex items-center justify-between mb-6">
              <div className="flex items-center space-x-2 text-white/60 text-sm">
                <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
                <span>/</span>
                <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
                <span>/</span>
                <span className="text-white font-semibold">Definitions</span>
              </div>
              <div className="flex gap-3">
                <button onClick={() => setDefinitionsView('learn')} className="btn-secondary btn-small">
                  üìñ Learn View
                </button>
                <button onClick={() => setMode('menu')} className="btn-secondary btn-small">‚Üê Back</button>
              </div>
            </div>

            <div className="text-center mb-6">
              <div className="badge badge-accent mb-2">Definition {currentCard + 1} / {allDefinitions.length}</div>
            </div>

            {/* 3D Flashcard for definitions */}
            <div className="flashcard-3d mb-8" onClick={() => setIsFlipped(!isFlipped)}>
              <div className={`flashcard-inner ${isFlipped ? 'flipped' : ''}`} style={{position: 'relative', minHeight: '500px'}}>
                {/* Front - term */}
                <div className="flashcard-front absolute inset-0" style={{backfaceVisibility: 'hidden'}}>
                  <div className={`${currentDef.color} p-12 rounded-3xl shadow-2xl cursor-pointer h-full flex flex-col items-center justify-center`}>
                    <div className="text-8xl mb-6">{currentDef.visual}</div>
                    <div className="badge badge-purple mb-4">{currentDef.category}</div>
                    <h2 className="text-4xl font-bold text-white text-center mb-4">{currentDef.term}</h2>
                    <p className="text-white/70 text-lg">Click to flip ‚Üí</p>
                  </div>
                </div>

                {/* Back - definition */}
                <div className="flashcard-back absolute inset-0" style={{backfaceVisibility: 'hidden', transform: 'rotateY(180deg)'}}>
                  <div className="card p-8 h-full overflow-y-auto">
                    <div className="flex items-center gap-3 mb-6">
                      <div className="text-5xl">{currentDef.visual}</div>
                      <div>
                        <h3 className="text-2xl font-bold text-white">{currentDef.term}</h3>
                        <div className="badge badge-purple mt-2">{currentDef.category}</div>
                      </div>
                    </div>

                    <div className="space-y-4">
                      <div className="bg-blue-500/10 border border-blue-500/30 p-4 rounded-xl">
                        <div className="text-blue-300 font-bold mb-2">üìñ Definition</div>
                        <p className="text-white/90">{currentDef.definition}</p>
                      </div>

                      <div className="bg-green-500/10 border border-green-500/30 p-4 rounded-xl">
                        <div className="text-green-300 font-bold mb-2">üí° Example</div>
                        <p className="text-white/90">{currentDef.example}</p>
                      </div>

                      <div className="bg-purple-500/10 border border-purple-500/30 p-4 rounded-xl">
                        <div className="text-purple-300 font-bold mb-2">üéØ Remember</div>
                        <p className="text-white/90 font-semibold">{currentDef.remember}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            {/* Navigation */}
            <div className="flex justify-between items-center">
              <button
                onClick={() => { setCurrentCard(Math.max(0, currentCard - 1)); setIsFlipped(false); }}
                disabled={currentCard === 0}
                className="btn-secondary disabled:opacity-30"
              >
                ‚Üê Previous
              </button>
              <button onClick={() => setIsFlipped(!isFlipped)} className="btn-primary">
                {isFlipped ? 'Show Term' : 'Show Definition'}
              </button>
              <button
                onClick={() => { setCurrentCard(Math.min(allDefinitions.length - 1, currentCard + 1)); setIsFlipped(false); }}
                disabled={currentCard === allDefinitions.length - 1}
                className="btn-secondary disabled:opacity-30"
              >
                Next ‚Üí
              </button>
            </div>

            {/* Topic Jump */}
            <div className="card p-6 mt-8">
              <h3 className="text-white font-bold mb-4">Jump to Topic</h3>
              <div className="flex flex-wrap gap-3">
                {topicCategories.map((topic, idx) => {
                  const startIdx = topicCategories.slice(0, idx).reduce((sum, t) => sum + t.concepts.length, 0);
                  return (
                    <button
                      key={idx}
                      onClick={() => { setCurrentCard(startIdx); setIsFlipped(false); }}
                      className="btn-secondary btn-small"
                    >
                      {topic.icon} {topic.name}
                    </button>
                  );
                })}
              </div>
            </div>
          </div>
        </div>
      );
    }
  };

  // Compare & Contrast Mode
  const CompareMode = () => {
    const [selectedComparison, setSelectedComparison] = useState('dnarna');
    const comparison = comparisons[selectedComparison];

    return (
      <div className="min-h-screen p-4 pt-20">
        <div className="max-w-6xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center space-x-2 text-white/60 text-sm">
              <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
              <span>/</span>
              <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
              <span>/</span>
              <span className="text-white font-semibold">Compare & Contrast</span>
            </div>
            <button onClick={() => setMode('menu')} className="btn-secondary btn-small">‚Üê Back</button>
          </div>

          <h1 className="heading-md gradient-text mb-8 text-center">‚öñÔ∏è Compare & Contrast</h1>

          {/* Comparison Selector */}
          <div className="flex flex-wrap gap-3 mb-8 justify-center">
            {Object.keys(comparisons).map((key) => (
              <button
                key={key}
                onClick={() => setSelectedComparison(key)}
                className={selectedComparison === key ? 'btn-primary' : 'btn-secondary'}
              >
                {comparisons[key].title}
              </button>
            ))}
          </div>

          {/* Comparison Table */}
          <div className="card p-8">
            <h2 className="text-3xl font-bold text-white mb-6 text-center">{comparison.title}</h2>
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="border-b border-white/20">
                    {comparison.headers.map((header, idx) => (
                      <th key={idx} className="text-left p-4 text-white font-bold text-lg">
                        {header}
                      </th>
                    ))}
                  </tr>
                </thead>
                <tbody>
                  {comparison.rows.map((row, rowIdx) => (
                    <tr key={rowIdx} className="border-b border-white/10 comparison-row transition-all">
                      {row.map((cell, cellIdx) => (
                        <td key={cellIdx} className={`p-4 ${cellIdx === 0 ? 'font-bold text-purple-300' : 'text-white/90'}`}>
                          {cell}
                        </td>
                      ))}
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>

          {/* Visual Summary */}
          {selectedComparison === 'cells' && (
            <div className="grid md:grid-cols-2 gap-6 mt-8">
              <div className="card p-6">
                <h3 className="text-xl font-bold text-white mb-4">üîµ Prokaryotic Cell</h3>
                {!imageErrors.prokaryotic ? (
                  <img
                    src={cellImages.prokaryotic}
                    alt="Prokaryotic Cell Diagram"
                    className="w-full rounded-xl mb-4"
                    style={{background: 'white', padding: '20px', minHeight: '300px', objectFit: 'contain'}}
                    onError={() => setImageErrors({...imageErrors, prokaryotic: true})}
                  />
                ) : (
                  <div className="bg-blue-500/10 border-2 border-dashed border-blue-500/30 rounded-xl p-12 mb-4 text-center">
                    <div className="text-6xl mb-4">üîµ</div>
                    <p className="text-white/70">Prokaryotic Cell Diagram</p>
                  </div>
                )}
                <ul className="text-white/80 text-sm space-y-2">
                  <li>‚Ä¢ No nucleus - DNA in cytoplasm</li>
                  <li>‚Ä¢ Smaller (1-10 Œºm)</li>
                  <li>‚Ä¢ Example: Bacteria</li>
                </ul>
              </div>
              <div className="card p-6">
                <h3 className="text-xl font-bold text-white mb-4">üü£ Eukaryotic Cell</h3>
                {!imageErrors.animal ? (
                  <img
                    src={cellImages.animal}
                    alt="Eukaryotic Cell Diagram"
                    className="w-full rounded-xl mb-4"
                    style={{background: 'white', padding: '20px', minHeight: '300px', objectFit: 'contain'}}
                    onError={() => setImageErrors({...imageErrors, animal: true})}
                  />
                ) : (
                  <div className="bg-purple-500/10 border-2 border-dashed border-purple-500/30 rounded-xl p-12 mb-4 text-center">
                    <div className="text-6xl mb-4">üü£</div>
                    <p className="text-white/70">Eukaryotic Cell Diagram</p>
                  </div>
                )}
                <ul className="text-white/80 text-sm space-y-2">
                  <li>‚Ä¢ Has nucleus with DNA</li>
                  <li>‚Ä¢ Larger (10-100 Œºm)</li>
                  <li>‚Ä¢ Example: Animals, Plants</li>
                </ul>
              </div>
            </div>
          )}
        </div>
      </div>
    );
  };

  // Practice Test Mode (Complete)
  const TestMode = () => {
    if (testQuestions.length === 0) return null;

    if (showResults) {
      const results = calculateTestScore();
      return (
        <div className="min-h-screen p-4 pt-20">
          <div className="max-w-5xl mx-auto">
            <div className="card p-8">
              <div className="text-center mb-8">
                <div className="text-8xl mb-4">
                  {results.percentage >= 90 ? 'üèÜ' : results.percentage >= 70 ? 'üåü' : 'üìö'}
                </div>
                <h2 className="text-4xl font-bold text-white mb-2">Test Complete!</h2>
                <div className="text-3xl font-bold gradient-text mb-2">
                  {results.correct}/{results.total} ({results.percentage}%)
                </div>
                <p className="text-white/70">
                  {results.percentage >= 90 ? 'Outstanding! You\'ve mastered this! üéâ' :
                   results.percentage >= 80 ? 'Great job! Keep it up! üëè' :
                   results.percentage >= 70 ? 'Good work! Review the missed topics. üìñ' :
                   'Keep studying! You\'ll get there! üí™'}
                </p>
              </div>

              {/* Results by Category */}
              <div className="mb-8">
                <h3 className="text-xl font-bold text-white mb-4">üìä By Category</h3>
                <div className="grid md:grid-cols-3 gap-4">
                  {topicCategories.map((cat, idx) => {
                    const catQuestions = testQuestions.filter(q => q.category === cat.name);
                    const catCorrect = catQuestions.filter((q, i) => {
                      const qIdx = testQuestions.indexOf(q);
                      return q.type === 'multiple-choice'
                        ? userAnswers[qIdx] === q.correct
                        : userAnswers[qIdx] === q.correct;
                    }).length;

                    if (catQuestions.length === 0) return null;

                    return (
                      <div key={idx} className={`${cat.color} p-4 rounded-xl`}>
                        <div className="text-2xl mb-2">{cat.icon}</div>
                        <div className="text-white font-bold">{cat.name}</div>
                        <div className="text-white/90 text-2xl font-bold mt-2">
                          {catCorrect}/{catQuestions.length}
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>

              {/* Question Review */}
              <div className="space-y-4 mb-8 max-h-96 overflow-y-auto">
                {testQuestions.map((q, idx) => {
                  const userAnswer = userAnswers[idx];
                  const isCorrect = q.type === 'multiple-choice'
                    ? userAnswer === q.correct
                    : userAnswer === q.correct;

                  return (
                    <div key={idx} className={`p-4 rounded-xl border-2 ${isCorrect ? 'bg-green-500/10 border-green-500/50' : 'bg-red-500/10 border-red-500/50'}`}>
                      <div className="flex gap-3">
                        <div className="text-2xl">{isCorrect ? '‚úÖ' : '‚ùå'}</div>
                        <div className="flex-1">
                          <div className="badge badge-purple mb-2">{q.category}</div>
                          <p className="text-white font-semibold mb-2">{idx + 1}. {q.question}</p>
                          {!isCorrect && (
                            <div className="text-sm space-y-1">
                              <div className="text-red-300">Your answer: {q.type === 'multiple-choice' ? q.options[userAnswer] : String(userAnswer)}</div>
                              <div className="text-green-300">Correct: {q.type === 'multiple-choice' ? q.options[q.correct] : String(q.correct)}</div>
                              <div className="text-white/70 mt-2">{q.explanation}</div>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>

              <div className="flex gap-4">
                <button onClick={() => setMode('menu')} className="btn-secondary flex-1">
                  Back to Menu
                </button>
                <button onClick={initializeTest} className="btn-primary flex-1">
                  üîÑ Take New Test
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    }

    const currentQ = testQuestions[currentQuestion];
    const answered = userAnswers.hasOwnProperty(currentQuestion);

    return (
      <div className="min-h-screen p-4 pt-20">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center space-x-2 text-white/60 text-sm">
              <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
              <span>/</span>
              <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
              <span>/</span>
              <span className="text-white font-semibold">Practice Test</span>
            </div>
            <div className="badge badge-accent">
              Question {currentQuestion + 1} / {testQuestions.length}
            </div>
          </div>

          <div className="card p-8">
            <div className="badge badge-purple mb-4">{currentQ.category}</div>
            <h3 className="text-2xl font-bold text-white mb-6">{currentQ.question}</h3>

            {currentQ.type === 'multiple-choice' && (
              <div className="space-y-3 mb-8">
                {currentQ.options.map((option, idx) => (
                  <button
                    key={idx}
                    onClick={() => handleTestAnswer(idx)}
                    className={`w-full p-4 rounded-xl text-left font-semibold transition-all ${
                      userAnswers[currentQuestion] === idx
                        ? 'bg-purple-500 text-white border-2 border-purple-300 shadow-lg shadow-purple-500/50'
                        : 'bg-white/5 border border-white/20 text-white hover:bg-white/10'
                    }`}
                  >
                    <div className="flex items-center justify-between">
                      <span>{String.fromCharCode(65 + idx)}. {option}</span>
                      {userAnswers[currentQuestion] === idx && <span className="text-2xl">‚úì</span>}
                    </div>
                  </button>
                ))}
              </div>
            )}

            {currentQ.type === 'true-false' && (
              <div className="space-y-3 mb-8">
                <button
                  onClick={() => handleTestAnswer(true)}
                  className={`w-full p-4 rounded-xl text-left font-semibold transition-all ${
                    userAnswers[currentQuestion] === true
                      ? 'bg-purple-500 text-white border-2 border-purple-300 shadow-lg shadow-purple-500/50'
                      : 'bg-white/5 border border-white/20 text-white hover:bg-white/10'
                  }`}
                >
                  <div className="flex items-center justify-between">
                    <span>True</span>
                    {userAnswers[currentQuestion] === true && <span className="text-2xl">‚úì</span>}
                  </div>
                </button>
                <button
                  onClick={() => handleTestAnswer(false)}
                  className={`w-full p-4 rounded-xl text-left font-semibold transition-all ${
                    userAnswers[currentQuestion] === false
                      ? 'bg-purple-500 text-white border-2 border-purple-300 shadow-lg shadow-purple-500/50'
                      : 'bg-white/5 border border-white/20 text-white hover:bg-white/10'
                  }`}
                >
                  <div className="flex items-center justify-between">
                    <span>False</span>
                    {userAnswers[currentQuestion] === false && <span className="text-2xl">‚úì</span>}
                  </div>
                </button>
              </div>
            )}

            <div className="flex justify-between">
              <button
                onClick={() => setCurrentQuestion(Math.max(0, currentQuestion - 1))}
                disabled={currentQuestion === 0}
                className="btn-secondary disabled:opacity-30"
              >
                ‚Üê Previous
              </button>

              {currentQuestion === testQuestions.length - 1 ? (
                <button
                  onClick={handleSubmitTest}
                  disabled={Object.keys(userAnswers).length !== testQuestions.length}
                  className="btn-primary disabled:opacity-30"
                >
                  Submit Test
                </button>
              ) : (
                <button
                  onClick={() => setCurrentQuestion(currentQuestion + 1)}
                  disabled={!answered}
                  className="btn-primary disabled:opacity-30"
                >
                  Next ‚Üí
                </button>
              )}
            </div>

            {/* Progress Dots */}
            <div className="flex gap-2 justify-center mt-6 flex-wrap">
              {testQuestions.map((_, idx) => (
                <div
                  key={idx}
                  className={`w-3 h-3 rounded-full ${
                    userAnswers.hasOwnProperty(idx) ? 'bg-purple-500' : 'bg-white/20'
                  }`}
                />
              ))}
            </div>
          </div>
        </div>
      </div>
    );
  };

  // Mistake Bank Mode
  const MistakeBankMode = () => {
    return (
      <div className="min-h-screen p-4 pt-20">
        <div className="max-w-5xl mx-auto">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center space-x-2 text-white/60 text-sm">
              <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
              <span>/</span>
              <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
              <span>/</span>
              <span className="text-white font-semibold">Mistake Bank</span>
            </div>
            <button onClick={() => setMode('menu')} className="btn-secondary btn-small">‚Üê Back</button>
          </div>

          <h1 className="heading-md gradient-text mb-8 text-center">üéØ Mistake Bank</h1>

          {mistakeBank.length === 0 ? (
            <div className="card p-12 text-center">
              <div className="text-8xl mb-4">üéâ</div>
              <h2 className="text-3xl font-bold text-white mb-4">No Mistakes Yet!</h2>
              <p className="text-white/70 mb-6">Take practice tests to track the questions you miss</p>
              <button onClick={() => setMode('test')} className="btn-primary">
                Take Practice Test
              </button>
            </div>
          ) : (
            <>
              <div className="flex gap-4 mb-8 justify-center">
                <div className="stat-card">
                  <div className="stat-icon">üìù</div>
                  <div className="stat-value">{mistakeBank.length}</div>
                  <div className="stat-label">Mistakes Tracked</div>
                </div>
                <button
                  onClick={() => {
                    initializeTest(mistakeBank);
                    setMode('test');
                  }}
                  className="btn-primary"
                >
                  Practice from Mistakes
                </button>
                <button
                  onClick={() => {
                    if (confirm('Clear all mistakes?')) {
                      saveMistakeBank([]);
                    }
                  }}
                  className="btn-danger"
                >
                  Clear All
                </button>
              </div>

              <div className="space-y-4">
                {mistakeBank.map((mistake, idx) => (
                  <div key={idx} className="card p-6">
                    <div className="badge badge-purple mb-3">{mistake.category}</div>
                    <h3 className="text-xl font-bold text-white mb-3">{mistake.question}</h3>

                    {mistake.type === 'multiple-choice' && (
                      <div className="space-y-2 mb-4">
                        {mistake.options.map((opt, optIdx) => (
                          <div
                            key={optIdx}
                            className={`p-3 rounded-lg ${
                              optIdx === mistake.correct
                                ? 'bg-green-500/20 border border-green-500/50'
                                : optIdx === mistake.userAnswer
                                ? 'bg-red-500/20 border border-red-500/50'
                                : 'bg-white/5'
                            }`}
                          >
                            {opt}
                            {optIdx === mistake.correct && <span className="ml-2 text-green-300">‚úì Correct</span>}
                            {optIdx === mistake.userAnswer && optIdx !== mistake.correct && (
                              <span className="ml-2 text-red-300">‚úó Your answer</span>
                            )}
                          </div>
                        ))}
                      </div>
                    )}

                    <div className="bg-blue-500/10 border border-blue-500/30 p-4 rounded-xl">
                      <div className="text-blue-300 font-bold mb-2">üí° Explanation</div>
                      <p className="text-white/80">{mistake.explanation}</p>
                    </div>
                  </div>
                ))}
              </div>
            </>
          )}
        </div>
      </div>
    );
  };

  return (
    <div className="font-sans">
      {mode === 'menu' && <MenuScreen />}
      {mode === 'learn' && <LearnMode />}
      {mode === 'definitions' && <DefinitionsMode />}
      {mode === 'flashcards' && <FlashcardsMode />}
      {mode === 'compare' && <CompareMode />}
      {mode === 'test' && <TestMode />}
      {mode === 'mistakes' && <MistakeBankMode />}
    </div>
  );
}

ReactDOM.render(<BioQuiz3App />, document.getElementById('root'));
    </script>
    <!-- Dynamic Gradient System -->
    <script type="module" src="dynamic-gradient.js"></script>
</body>
</html>