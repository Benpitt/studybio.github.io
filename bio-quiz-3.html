<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéì</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio Quiz #3 - Complete Study Guide</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="global-styles.css">
    <link rel="stylesheet" href="apple-style.css">
    <link rel="stylesheet" href="button-styles.css">
    <style>
        /* Interactive diagram styles */
        .interactive-cell {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .interactive-cell:hover {
            transform: scale(1.05);
            filter: brightness(1.2);
        }
        .cell-part {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .cell-part:hover {
            stroke-width: 3;
            filter: drop-shadow(0 0 10px currentColor);
        }
        .cell-part.active {
            stroke-width: 4;
            filter: drop-shadow(0 0 15px currentColor);
        }
        .enzyme-animation {
            animation: enzyme-pulse 2s ease-in-out infinite;
        }
        @keyframes enzyme-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .concept-node {
            transition: all 0.3s ease;
        }
        .concept-node:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(124, 58, 237, 0.4);
        }
        .comparison-row:hover {
            background: rgba(124, 58, 237, 0.1);
        }
        .flashcard-3d {
            perspective: 1000px;
        }
        .flashcard-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flashcard-inner.flipped {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            backface-visibility: hidden;
        }
        .flashcard-back {
            transform: rotateY(180deg);
        }
        .microscope-slider {
            width: 100%;
            height: 8px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }
        .microscope-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect, useRef } = React;

function BioQuiz3App() {
  const [mode, setMode] = useState('menu');
  const [currentCard, setCurrentCard] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [testQuestions, setTestQuestions] = useState([]);
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [userAnswers, setUserAnswers] = useState({});
  const [showResults, setShowResults] = useState(false);
  const [mistakeBank, setMistakeBank] = useState([]);
  const [selectedCellPart, setSelectedCellPart] = useState(null);
  const [microscopeZoom, setMicroscopeZoom] = useState(400);
  const [enzymeStep, setEnzymeStep] = useState(0);
  const [customTestQuestions, setCustomTestQuestions] = useState([]);

  // Load mistake bank from localStorage
  useEffect(() => {
    const saved = localStorage.getItem('bioQuiz3Mistakes');
    if (saved) {
      setMistakeBank(JSON.parse(saved));
    }
  }, []);

  // Save mistake bank
  const saveMistakeBank = (mistakes) => {
    localStorage.setItem('bioQuiz3Mistakes', JSON.stringify(mistakes));
    setMistakeBank(mistakes);
  };

  // Quick Reference Facts (easily forgettable)
  const quickFacts = [
    { emoji: '‚öõÔ∏è', fact: 'Isotopes = same protons, different neutrons', category: 'Atomic' },
    { emoji: 'üíß', fact: 'Hydrogen bonds: 2 for A-T, 3 for G-C', category: 'Bonding' },
    { emoji: 'üçû', fact: 'Starch (plant), Glycogen (animal), Cellulose (structure)', category: 'Carbs' },
    { emoji: 'üßà', fact: 'Saturated = solid, Unsaturated = liquid', category: 'Lipids' },
    { emoji: 'üî¨', fact: 'Light microscope: ~1000x, Electron: ~1,000,000x', category: 'Cells' },
    { emoji: 'üß¨', fact: 'DNA: deoxyribose + T, RNA: ribose + U', category: 'Nucleic Acids' },
    { emoji: '‚ö°', fact: 'Enzyme: speeds reaction, NOT consumed', category: 'Enzymes' },
    { emoji: 'üìä', fact: 'Mean = average, Median = middle, Mode = most frequent', category: 'Data' },
    { emoji: 'üî¨', fact: 'Independent = what you change, Dependent = what you measure', category: 'Experiments' },
    { emoji: 'ü¶†', fact: 'Prokaryote = NO nucleus, Eukaryote = HAS nucleus', category: 'Cells' },
    { emoji: 'üß´', fact: 'Dehydration = build + remove H‚ÇÇO, Hydrolysis = break + add H‚ÇÇO', category: 'Reactions' },
    { emoji: 'üîó', fact: 'Primary = sequence, Secondary = helix/sheet, Tertiary = 3D shape', category: 'Proteins' },
  ];

  // Cell images and diagrams
  const cellImages = {
    prokaryotic: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Prokaryote_cell.svg/500px-Prokaryote_cell.svg.png',
    eukaryotic: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Biological_cell.svg/500px-Biological_cell.svg.png',
    plant: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Plant_cell_structure_svg.svg/500px-Plant_cell_structure_svg.png',
    animal: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Animal_cell_structure_en.svg/500px-Animal_cell_structure_en.svg.png',
  };

  // Comprehensive topic data
  const topicCategories = [
    {
      name: 'Experimental Design',
      icon: 'üî¨',
      color: 'card-gradient-blue',
      concepts: [
        {
          term: 'Independent Variable',
          definition: 'The variable that is deliberately changed or manipulated in an experiment.',
          example: 'If testing how light affects plant growth, light intensity is the independent variable.',
          visual: 'üìä',
          remember: 'Think: "I change this"'
        },
        {
          term: 'Dependent Variable',
          definition: 'The variable that is measured or observed in response to changes in the independent variable.',
          example: 'Plant height measured in response to different light intensities.',
          visual: 'üìà',
          remember: 'Think: "Data depends on what I changed"'
        },
        {
          term: 'Control Variable',
          definition: 'Variables that are kept constant throughout the experiment to ensure a fair test.',
          example: 'Same soil type, water amount, and temperature for all plants.',
          visual: 'üéØ',
          remember: 'Keep these the SAME for all groups'
        },
        {
          term: 'Testable Hypothesis',
          definition: 'A specific, measurable prediction about the relationship between variables.',
          example: 'If light intensity increases, then plant growth will increase because more energy is available for photosynthesis.',
          visual: 'üí°',
          remember: 'Format: If [change IV], then [predict DV], because [reason]'
        },
      ]
    },
    {
      name: 'Data Analysis',
      icon: 'üìä',
      color: 'card-gradient-success',
      concepts: [
        {
          term: 'Qualitative Data',
          definition: 'Descriptive data that can be observed but not measured with numbers.',
          example: 'Color of flowers, texture of leaves, smell of chemicals.',
          visual: 'üëÅÔ∏è',
          remember: 'Quality = descriptive words'
        },
        {
          term: 'Quantitative Continuous',
          definition: 'Numerical data that can take any value within a range and can be measured.',
          example: 'Temperature (37.5¬∞C), height (152.3 cm), time (4.7 seconds).',
          visual: 'üìè',
          remember: 'Can have decimals - measured'
        },
        {
          term: 'Quantitative Discontinuous',
          definition: 'Numerical data that can only take specific, discrete values (counted).',
          example: 'Number of students (25), number of seeds that germinated (18).',
          visual: 'üî¢',
          remember: 'Whole numbers only - counted'
        },
        {
          term: 'Mean',
          definition: 'The average of all values in a data set (sum √∑ count).',
          example: 'Data: 5, 8, 3, 9, 5. Mean = (5+8+3+9+5)√∑5 = 6',
          visual: '‚ûó',
          remember: 'Add all, divide by count'
        },
        {
          term: 'Median',
          definition: 'The middle value when data is arranged in order.',
          example: 'Data: 3, 5, 5, 8, 9. Median = 5 (middle value)',
          visual: 'üéØ',
          remember: 'The middle number'
        },
        {
          term: 'Mode',
          definition: 'The value that appears most frequently in a data set.',
          example: 'Data: 3, 5, 5, 8, 9. Mode = 5 (appears twice)',
          visual: 'üîÅ',
          remember: 'Most common = mode'
        },
      ]
    },
    {
      name: 'Atomic Structure',
      icon: '‚öõÔ∏è',
      color: 'card-gradient-purple',
      concepts: [
        {
          term: 'Proton',
          definition: 'Positively charged particle in the nucleus. Determines the element.',
          example: 'Carbon has 6 protons. All atoms with 6 protons are carbon.',
          visual: '‚ûï',
          remember: 'P = Positive, # of protons = atomic number'
        },
        {
          term: 'Neutron',
          definition: 'Neutral particle (no charge) in the nucleus. Affects atomic mass.',
          example: 'Carbon-12 has 6 neutrons. Carbon-14 has 8 neutrons.',
          visual: '‚ö™',
          remember: 'N = Neutral (no charge)'
        },
        {
          term: 'Electron',
          definition: 'Negatively charged particle orbiting the nucleus. Involved in bonding.',
          example: 'Neutral carbon has 6 electrons to balance 6 protons.',
          visual: '‚ûñ',
          remember: 'E = nEgative, orbits outside'
        },
        {
          term: 'Ion',
          definition: 'An atom with unequal protons and electrons, giving it a charge.',
          example: 'Na‚Å∫ has 11 protons but 10 electrons (lost 1 electron, positive charge).',
          visual: '‚ö°',
          remember: 'Lost e‚Åª = positive, Gained e‚Åª = negative'
        },
        {
          term: 'Isotope',
          definition: 'Atoms of the same element with different numbers of neutrons.',
          example: 'Carbon-12 (6p, 6n) and Carbon-14 (6p, 8n) are isotopes.',
          visual: 'üîÑ',
          remember: 'Same protons, different neutrons'
        },
      ]
    },
    {
      name: 'Water & Polarity',
      icon: 'üíß',
      color: 'card-gradient-sky',
      concepts: [
        {
          term: 'Covalent Bond',
          definition: 'A strong bond formed by sharing electrons between atoms within a molecule.',
          example: 'H-O bonds in water (H‚ÇÇO) are covalent bonds.',
          visual: 'üîó',
          remember: 'Co = together, WITHIN molecules'
        },
        {
          term: 'Hydrogen Bond',
          definition: 'A weak attraction between a slightly positive H and a slightly negative atom (O, N, F) in different molecules.',
          example: 'Hydrogen bonds form between water molecules.',
          visual: '„Ä∞Ô∏è',
          remember: 'Weak, BETWEEN molecules'
        },
        {
          term: 'Polar Molecule',
          definition: 'A molecule with an uneven distribution of charge.',
          example: 'Water (H‚ÇÇO) is polar. O is Œ¥‚Åª and H are Œ¥‚Å∫.',
          visual: 'üß≤',
          remember: 'Has + and - ends like a magnet'
        },
        {
          term: 'Hydrophilic',
          definition: 'Water-loving - polar or charged substances that dissolve in water.',
          example: 'Salt (NaCl), sugar, polar R groups.',
          visual: '‚ù§Ô∏è',
          remember: 'Philic = loves water'
        },
        {
          term: 'Hydrophobic',
          definition: 'Water-fearing - nonpolar substances that do not dissolve in water.',
          example: 'Oils, fats, nonpolar R groups.',
          visual: 'üò®',
          remember: 'Phobic = fears water'
        },
      ]
    },
    {
      name: 'Biological Molecules',
      icon: 'üß¨',
      color: 'card-gradient-violet',
      concepts: [
        {
          term: 'Carbohydrates',
          definition: 'Molecules made of C, H, O in 1:2:1 ratio. Quick energy, storage, structure.',
          example: 'Glucose, starch, cellulose, glycogen.',
          visual: 'üçû',
          remember: 'CHO, 1:2:1 ratio'
        },
        {
          term: 'Monosaccharide',
          definition: 'Simple sugar monomer.',
          example: 'Glucose, fructose, galactose.',
          visual: '‚¨°',
          remember: 'Mono = one sugar unit'
        },
        {
          term: 'Disaccharide',
          definition: 'Two monosaccharides joined.',
          example: 'Sucrose (glucose + fructose), lactose, maltose.',
          visual: '‚¨°‚¨°',
          remember: 'Di = two sugar units'
        },
        {
          term: 'Polysaccharide',
          definition: 'Many monosaccharides joined.',
          example: 'Starch (plants), glycogen (animals), cellulose (structure).',
          visual: '‚¨°‚¨°‚¨°‚¨°‚¨°',
          remember: 'Poly = many sugar units'
        },
        {
          term: 'Lipids',
          definition: 'Hydrophobic molecules. Long-term energy, membranes, hormones.',
          example: 'Fats, oils, phospholipids, steroids.',
          visual: 'üßà',
          remember: 'Water-fearing, high energy'
        },
        {
          term: 'Saturated Fat',
          definition: 'No double bonds. Straight chains. Solid at room temp.',
          example: 'Butter, lard, coconut oil.',
          visual: '‚îÅ',
          remember: 'Saturated with H, straight = solid'
        },
        {
          term: 'Unsaturated Fat',
          definition: 'Has double bonds creating kinks. Liquid at room temp.',
          example: 'Olive oil, vegetable oil.',
          visual: '‚àø',
          remember: 'Not saturated, kinked = liquid'
        },
        {
          term: 'Phospholipid',
          definition: 'Glycerol + 2 fatty acids + phosphate. Forms cell membranes.',
          example: 'Cell membrane bilayer.',
          visual: 'üé≠',
          remember: 'Hydrophilic head, hydrophobic tails'
        },
        {
          term: 'Proteins',
          definition: 'Polymers of amino acids. Enzymes, structure, transport, etc.',
          example: 'Enzymes, hemoglobin, antibodies, collagen.',
          visual: 'üîó',
          remember: 'CHON + sometimes S'
        },
        {
          term: 'Amino Acid',
          definition: 'Monomer of proteins. Has amino group, carboxyl group, R group.',
          example: '20 different types based on R groups.',
          visual: 'üî§',
          remember: 'NH‚ÇÇ + COOH + R group'
        },
        {
          term: 'Nucleic Acids',
          definition: 'Polymers of nucleotides. Store and transmit genetic info.',
          example: 'DNA, RNA, ATP.',
          visual: 'üß¨',
          remember: 'CHONP (has phosphorus!)'
        },
        {
          term: 'Dehydration Synthesis',
          definition: 'Building larger molecules by removing water.',
          example: 'Two glucose ‚Üí maltose + H‚ÇÇO',
          visual: 'üî®',
          remember: 'Build (anabolic) - lose water'
        },
        {
          term: 'Hydrolysis',
          definition: 'Breaking molecules by adding water.',
          example: 'Maltose + H‚ÇÇO ‚Üí two glucose',
          visual: 'üí•',
          remember: 'Break (catabolic) + add water'
        },
      ]
    },
    {
      name: 'Enzymes',
      icon: '‚ö°',
      color: 'card-gradient-amber',
      concepts: [
        {
          term: 'Enzyme',
          definition: 'Biological catalyst that speeds up reactions by lowering activation energy.',
          example: 'Catalase breaks down H‚ÇÇO‚ÇÇ, amylase breaks down starch.',
          visual: '‚ö°',
          remember: 'Speeds up, NOT consumed'
        },
        {
          term: 'Substrate',
          definition: 'The reactant molecule(s) that an enzyme acts upon.',
          example: 'For amylase, starch is the substrate.',
          visual: 'üéØ',
          remember: 'What the enzyme works on'
        },
        {
          term: 'Active Site',
          definition: 'The specific region where substrate binds.',
          example: 'Lock and key model.',
          visual: 'üîì',
          remember: 'The "keyhole" on enzyme'
        },
        {
          term: 'Competitive Inhibitor',
          definition: 'Blocks the active site by competing with substrate.',
          example: 'Shaped like substrate, fights for active site.',
          visual: 'üö´',
          remember: 'Competes for active site'
        },
        {
          term: 'Noncompetitive Inhibitor',
          definition: 'Binds elsewhere, changes enzyme shape.',
          example: 'Binds to allosteric site, distorts active site.',
          visual: 'üîß',
          remember: 'Changes shape, not blocking'
        },
        {
          term: 'Denaturation',
          definition: 'Loss of enzyme shape and function due to extreme conditions.',
          example: 'High temperature or extreme pH breaks bonds.',
          visual: 'üî•',
          remember: 'Extreme temp/pH = broken enzyme'
        },
      ]
    },
    {
      name: 'Cells',
      icon: 'ü¶†',
      color: 'card-gradient-rose',
      concepts: [
        {
          term: 'Cell Theory',
          definition: '1) All living things are made of cells. 2) Cells are basic unit of life. 3) All cells from pre-existing cells.',
          example: 'Foundation of biology.',
          visual: 'üìú',
          remember: '3 principles: all made of cells, basic unit, from existing cells'
        },
        {
          term: 'Prokaryotic Cell',
          definition: 'Simple cell with NO nucleus. DNA floats in cytoplasm.',
          example: 'Bacteria and archaea.',
          visual: 'üîµ',
          remember: 'PRO = before nucleus evolved'
        },
        {
          term: 'Eukaryotic Cell',
          definition: 'Complex cell WITH nucleus and organelles.',
          example: 'Animals, plants, fungi, protists.',
          visual: 'üü£',
          remember: 'EU = true nucleus'
        },
        {
          term: 'Cell Membrane',
          definition: 'Phospholipid bilayer that controls what enters/exits. In ALL cells.',
          example: 'Selective barrier.',
          visual: 'üé≠',
          remember: 'ALL cells have this'
        },
        {
          term: 'Cell Wall',
          definition: 'Rigid structure outside membrane. Plants, bacteria, fungi.',
          example: 'Plant walls made of cellulose.',
          visual: 'üß±',
          remember: 'Outside membrane, NOT in animals'
        },
        {
          term: 'Nucleus',
          definition: 'Contains DNA. Controls cell. Eukaryotes only.',
          example: 'The "brain" of the cell.',
          visual: 'üß†',
          remember: 'DNA command center'
        },
        {
          term: 'Chloroplast',
          definition: 'Where photosynthesis occurs. Plants and some protists.',
          example: 'Contains chlorophyll.',
          visual: 'üåø',
          remember: 'Chloro = green, makes food from light'
        },
        {
          term: 'Light Microscope',
          definition: 'Uses visible light. Up to ~1000x magnification.',
          example: 'Good for cells, tissues.',
          visual: 'üî¨',
          remember: 'Pros: easy/cheap. Cons: lower magnification'
        },
        {
          term: 'Electron Microscope',
          definition: 'Uses electron beams. Up to ~1,000,000x magnification.',
          example: 'Can see viruses, organelles in detail.',
          visual: '‚ö°',
          remember: 'Pros: super detailed. Cons: expensive, samples dead'
        },
      ]
    },
  ];

  // Comprehensive question bank with images
  const questionBank = [
    // Experimental Design
    {
      category: 'Experimental Design',
      type: 'multiple-choice',
      question: 'In an experiment testing how fertilizer affects plant growth, what is the independent variable?',
      options: ['Plant height', 'Type of fertilizer', 'Amount of water', 'Soil type'],
      correct: 1,
      explanation: 'The independent variable is what YOU change or manipulate. In this case, it\'s the type of fertilizer being tested.',
      difficulty: 'easy'
    },
    {
      category: 'Experimental Design',
      type: 'multiple-choice',
      question: 'What is the dependent variable in an experiment testing how temperature affects enzyme activity?',
      options: ['Temperature', 'Enzyme activity', 'pH level', 'Time'],
      correct: 1,
      explanation: 'The dependent variable is what you MEASURE. Here, you measure enzyme activity in response to temperature changes.',
      difficulty: 'easy'
    },
    {
      category: 'Experimental Design',
      type: 'multiple-choice',
      question: 'Which variables should be controlled in a plant growth experiment?',
      options: ['Independent variables only', 'Dependent variables only', 'Variables that need to stay constant', 'No variables need control'],
      correct: 2,
      explanation: 'Control variables are kept constant to ensure the test is fair. Examples: same soil, water, pot size.',
      difficulty: 'medium'
    },

    // Data Analysis
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'Which type of data is "the color of flowers"?',
      options: ['Quantitative continuous', 'Quantitative discontinuous', 'Qualitative', 'Ranked'],
      correct: 2,
      explanation: 'Color is descriptive and cannot be measured with numbers, making it qualitative data.',
      difficulty: 'easy'
    },
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'What is the mean of this data set: 4, 7, 9, 2, 8?',
      options: ['5', '6', '7', '8'],
      correct: 1,
      explanation: 'Mean = (4+7+9+2+8) √∑ 5 = 30 √∑ 5 = 6',
      difficulty: 'easy'
    },
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'What is the median of: 3, 7, 2, 9, 5?',
      options: ['3', '5', '7', '9'],
      correct: 1,
      explanation: 'First arrange in order: 2, 3, 5, 7, 9. The middle value is 5.',
      difficulty: 'medium'
    },
    {
      category: 'Data Analysis',
      type: 'multiple-choice',
      question: 'Number of students in a class is what type of data?',
      options: ['Qualitative', 'Quantitative continuous', 'Quantitative discontinuous', 'Ranked'],
      correct: 2,
      explanation: 'You COUNT students in whole numbers only, making it quantitative discontinuous (discrete).',
      difficulty: 'medium'
    },

    // Atomic Structure
    {
      category: 'Atomic Structure',
      type: 'multiple-choice',
      question: 'An atom has 6 protons, 6 neutrons, and 6 electrons. What element is this?',
      options: ['Oxygen', 'Carbon', 'Nitrogen', 'Boron'],
      correct: 1,
      explanation: 'The number of protons determines the element. 6 protons = Carbon (C).',
      difficulty: 'easy'
    },
    {
      category: 'Atomic Structure',
      type: 'multiple-choice',
      question: 'If an atom has 11 protons and 10 electrons, is it neutral or charged?',
      options: ['Neutral', 'Positively charged', 'Negatively charged', 'Cannot determine'],
      correct: 1,
      explanation: 'More protons (11) than electrons (10) means it has a +1 charge. This is Na‚Å∫ (sodium ion).',
      difficulty: 'medium'
    },
    {
      category: 'Atomic Structure',
      type: 'multiple-choice',
      question: 'Carbon-12 and Carbon-14 are examples of:',
      options: ['Different elements', 'Isotopes', 'Ions', 'Molecules'],
      correct: 1,
      explanation: 'Isotopes are atoms of the same element with different numbers of neutrons. Both have 6 protons but different neutrons.',
      difficulty: 'medium'
    },

    // Water & Polarity
    {
      category: 'Water & Polarity',
      type: 'multiple-choice',
      question: 'What type of bond connects oxygen and hydrogen atoms WITHIN a water molecule?',
      options: ['Hydrogen bond', 'Ionic bond', 'Covalent bond', 'Peptide bond'],
      correct: 2,
      explanation: 'Covalent bonds form within molecules by sharing electrons. Hydrogen bonds form BETWEEN molecules.',
      difficulty: 'easy'
    },
    {
      category: 'Water & Polarity',
      type: 'multiple-choice',
      question: 'In a water molecule, which atom has a partial negative charge (Œ¥‚Åª)?',
      options: ['Hydrogen', 'Oxygen', 'Both equally', 'Neither'],
      correct: 1,
      explanation: 'Oxygen is more electronegative, pulling electrons closer and becoming Œ¥‚Åª. Hydrogens become Œ¥‚Å∫.',
      difficulty: 'medium'
    },
    {
      category: 'Water & Polarity',
      type: 'true-false',
      question: 'Hydrogen bonds are stronger than covalent bonds.',
      correct: false,
      explanation: 'False! Hydrogen bonds are weak intermolecular forces. Covalent bonds (within molecules) are much stronger.',
      difficulty: 'medium'
    },

    // Biological Molecules
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'What is the monomer of a carbohydrate?',
      options: ['Amino acid', 'Nucleotide', 'Monosaccharide', 'Fatty acid'],
      correct: 2,
      explanation: 'Monosaccharides (simple sugars like glucose) are the monomers of carbohydrates.',
      difficulty: 'easy'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'Which polysaccharide is used for energy storage in plants?',
      options: ['Glycogen', 'Cellulose', 'Starch', 'Chitin'],
      correct: 2,
      explanation: 'Starch is how plants store glucose. Glycogen is animal storage, cellulose is structure.',
      difficulty: 'easy'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'Saturated fats have:',
      options: ['Double bonds and are liquid', 'No double bonds and are solid', 'Double bonds and are solid', 'Many double bonds'],
      correct: 1,
      explanation: 'Saturated = saturated with hydrogen = no double bonds. Straight chains pack tightly = solid at room temp.',
      difficulty: 'medium'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'What makes up a phospholipid?',
      options: ['Glycerol + 3 fatty acids', 'Glycerol + 2 fatty acids + phosphate', '4 fused rings', 'Amino acids'],
      correct: 1,
      explanation: 'Phospholipids have glycerol + 2 fatty acids (hydrophobic tails) + phosphate group (hydrophilic head).',
      difficulty: 'medium'
    },
    {
      category: 'Biological Molecules',
      type: 'multiple-choice',
      question: 'What type of reaction breaks down polymers?',
      options: ['Dehydration synthesis', 'Hydrolysis', 'Condensation', 'Photosynthesis'],
      correct: 1,
      explanation: 'Hydrolysis adds water to break bonds, separating polymers into monomers (like digestion).',
      difficulty: 'medium'
    },
    {
      category: 'Biological Molecules',
      type: 'true-false',
      question: 'DNA contains the sugar ribose.',
      correct: false,
      explanation: 'False! DNA contains DEOXYribose. RNA contains ribose.',
      difficulty: 'easy'
    },

    // Enzymes
    {
      category: 'Enzymes',
      type: 'multiple-choice',
      question: 'How do enzymes speed up reactions?',
      options: ['By raising activation energy', 'By lowering activation energy', 'By being consumed', 'By changing products'],
      correct: 1,
      explanation: 'Enzymes lower the activation energy needed to start a reaction, making it happen faster.',
      difficulty: 'easy'
    },
    {
      category: 'Enzymes',
      type: 'multiple-choice',
      question: 'Where does the substrate bind on an enzyme?',
      options: ['Allosteric site', 'Active site', 'Ribosome', 'Cell membrane'],
      correct: 1,
      explanation: 'The substrate binds to the active site, which is specifically shaped to fit that substrate.',
      difficulty: 'easy'
    },
    {
      category: 'Enzymes',
      type: 'multiple-choice',
      question: 'What happens when an enzyme is denatured?',
      options: ['It works faster', 'It loses its shape and stops working', 'It duplicates', 'It becomes an inhibitor'],
      correct: 1,
      explanation: 'Denaturation breaks bonds holding enzyme shape, causing loss of function.',
      difficulty: 'medium'
    },
    {
      category: 'Enzymes',
      type: 'true-false',
      question: 'Enzymes are consumed in the reactions they catalyze.',
      correct: false,
      explanation: 'False! Enzymes are NOT consumed - they can be reused many times.',
      difficulty: 'easy'
    },

    // Cells
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'Which type of cell has a nucleus?',
      options: ['Prokaryotic only', 'Eukaryotic only', 'Both', 'Neither'],
      correct: 1,
      explanation: 'Only eukaryotic cells have a membrane-bound nucleus. Prokaryotes have DNA floating in cytoplasm.',
      difficulty: 'easy'
    },
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'Which organelle is found in plant cells but NOT animal cells?',
      options: ['Nucleus', 'Mitochondria', 'Chloroplast', 'Ribosome'],
      correct: 2,
      explanation: 'Chloroplasts (for photosynthesis) are found in plant cells, not animal cells.',
      difficulty: 'easy'
    },
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'Bacteria are classified as:',
      options: ['Eukaryotic', 'Prokaryotic', 'Viruses', 'Multicellular'],
      correct: 1,
      explanation: 'Bacteria are prokaryotes - they lack a nucleus and membrane-bound organelles.',
      difficulty: 'easy'
    },
    {
      category: 'Cells',
      type: 'true-false',
      question: 'All cells have ribosomes.',
      correct: true,
      explanation: 'True! Both prokaryotic and eukaryotic cells have ribosomes to make proteins.',
      difficulty: 'medium'
    },
    {
      category: 'Cells',
      type: 'multiple-choice',
      question: 'What is the main advantage of an electron microscope?',
      options: ['Cheaper', 'Can view living cells', 'Much higher magnification', 'Easier to use'],
      correct: 2,
      explanation: 'Electron microscopes can magnify up to 1,000,000x with high detail, though samples must be dead.',
      difficulty: 'medium'
    },
  ];

  // Comparison tables data
  const comparisons = {
    dnarna: {
      title: 'DNA vs RNA',
      headers: ['Feature', 'DNA', 'RNA'],
      rows: [
        ['Sugar', 'Deoxyribose', 'Ribose'],
        ['Bases', 'A, T, G, C', 'A, U, G, C'],
        ['Structure', 'Double helix', 'Single strand'],
        ['Location', 'Nucleus', 'Nucleus & cytoplasm'],
        ['Function', 'Store genetic info', 'Make proteins'],
        ['Stability', 'Very stable', 'Less stable'],
      ]
    },
    cells: {
      title: 'Prokaryotic vs Eukaryotic Cells',
      headers: ['Feature', 'Prokaryotic', 'Eukaryotic'],
      rows: [
        ['Nucleus', '‚ùå No', '‚úÖ Yes'],
        ['Size', 'Small (1-10 Œºm)', 'Large (10-100 Œºm)'],
        ['DNA', 'Circular, in cytoplasm', 'Linear, in nucleus'],
        ['Organelles', 'No membrane-bound', 'Has membrane-bound'],
        ['Ribosomes', '‚úÖ Yes (smaller)', '‚úÖ Yes (larger)'],
        ['Examples', 'Bacteria, Archaea', 'Animals, Plants, Fungi'],
      ]
    },
    polysaccharides: {
      title: 'Starch vs Glycogen vs Cellulose',
      headers: ['Feature', 'Starch', 'Glycogen', 'Cellulose'],
      rows: [
        ['Found in', 'üå± Plants', 'ü¶¥ Animals', 'üå≥ Plant walls'],
        ['Function', 'Energy storage', 'Energy storage', 'Structural support'],
        ['Branching', 'Some branches', 'Highly branched', 'No branches'],
        ['Digestible?', '‚úÖ Yes (humans)', '‚úÖ Yes', '‚ùå No (humans)'],
        ['Structure', 'Œ±-glucose chains', 'Œ±-glucose chains', 'Œ≤-glucose chains'],
      ]
    },
    lipids: {
      title: 'Triglyceride vs Phospholipid vs Steroid',
      headers: ['Feature', 'Triglyceride', 'Phospholipid', 'Steroid'],
      rows: [
        ['Structure', 'Glycerol + 3 fatty acids', 'Glycerol + 2 fatty acids + PO‚ÇÑ', '4 fused rings'],
        ['Function', 'Energy storage', 'Cell membranes', 'Hormones'],
        ['Polarity', 'Nonpolar (hydrophobic)', 'Amphipathic', 'Mostly nonpolar'],
        ['Examples', 'Fats, oils', 'Membrane lipids', 'Cholesterol, testosterone'],
      ]
    },
    microscopes: {
      title: 'Light vs Electron Microscope',
      headers: ['Feature', 'Light Microscope', 'Electron Microscope'],
      rows: [
        ['Uses', 'Visible light', 'Electron beams'],
        ['Max Magnification', '~1,000x', '~1,000,000x'],
        ['Resolution', 'Lower', 'Much higher'],
        ['Living samples?', '‚úÖ Yes', '‚ùå No (must be dead)'],
        ['Cost', 'üí∞ Affordable', 'üí∞üí∞üí∞ Very expensive'],
        ['Can see', 'Cells, bacteria', 'Viruses, organelles, molecules'],
      ]
    },
  };

  const initializeTest = (questions = null) => {
    const questionsToUse = questions || questionBank;
    const shuffled = [...questionsToUse].sort(() => Math.random() - 0.5).slice(0, 20);
    setTestQuestions(shuffled);
    setCurrentQuestion(0);
    setUserAnswers({});
    setShowResults(false);
  };

  useEffect(() => {
    if (mode === 'test') {
      initializeTest();
    }
  }, [mode]);

  const handleTestAnswer = (answer) => {
    setUserAnswers({...userAnswers, [currentQuestion]: answer});
  };

  const calculateTestScore = () => {
    let correct = 0;
    const mistakes = [];

    testQuestions.forEach((q, idx) => {
      const isCorrect = q.type === 'multiple-choice'
        ? userAnswers[idx] === q.correct
        : userAnswers[idx] === q.correct;

      if (isCorrect) {
        correct++;
      } else {
        mistakes.push({...q, userAnswer: userAnswers[idx], questionIndex: idx});
      }
    });

    // Save mistakes to mistake bank
    if (mistakes.length > 0) {
      const updatedBank = [...mistakeBank, ...mistakes];
      saveMistakeBank(updatedBank);
    }

    return {
      correct,
      total: testQuestions.length,
      percentage: Math.round((correct / testQuestions.length) * 100),
      mistakes
    };
  };

  // Menu Screen
  const MenuScreen = () => (
    <div className="min-h-screen p-4 pt-20">
      {/* Breadcrumbs */}
      <div className="max-w-7xl mx-auto mb-6">
        <div className="flex items-center space-x-2 text-white/60 text-sm">
          <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
          <span>/</span>
          <span className="text-white font-semibold">Bio Quiz #3</span>
        </div>
      </div>

      <div className="max-w-7xl mx-auto">
        {/* Hero Section */}
        <div className="text-center mb-12 fade-in">
          <div className="text-8xl mb-6">üß¨</div>
          <h1 className="heading-lg gradient-text mb-4">Bio Quiz #3</h1>
          <p className="body-lg text-white/70 max-w-2xl mx-auto">
            Complete visual study guide with interactive diagrams, concept maps, and comprehensive practice
          </p>
        </div>

        {/* Quick Stats */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <div className="stat-card">
            <div className="stat-icon">üé¥</div>
            <div className="stat-value">{topicCategories.reduce((sum, cat) => sum + cat.concepts.length, 0)}</div>
            <div className="stat-label">Flashcards</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üìù</div>
            <div className="stat-value">{questionBank.length}</div>
            <div className="stat-label">Practice Questions</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üó∫Ô∏è</div>
            <div className="stat-value">7</div>
            <div className="stat-label">Topics</div>
          </div>
          <div className="stat-card">
            <div className="stat-icon">üéØ</div>
            <div className="stat-value">{mistakeBank.length}</div>
            <div className="stat-label">Mistakes Tracked</div>
          </div>
        </div>

        {/* Main Study Modes */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <button
            onClick={() => setMode('learn')}
            className="card-gradient-violet p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üìö</div>
            <h3 className="text-2xl font-bold text-white mb-2">Learn Mode</h3>
            <p className="text-white/70 mb-4">Quick facts, concept maps, and visual guides</p>
            <div className="flex items-center text-purple-300 text-sm font-semibold">
              Start Learning ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('flashcards')}
            className="card-gradient-blue p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üé¥</div>
            <h3 className="text-2xl font-bold text-white mb-2">Flashcards</h3>
            <p className="text-white/70 mb-4">Interactive cards with images and examples</p>
            <div className="flex items-center text-blue-300 text-sm font-semibold">
              Start Reviewing ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('compare')}
            className="card-gradient-sky p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">‚öñÔ∏è</div>
            <h3 className="text-2xl font-bold text-white mb-2">Compare & Contrast</h3>
            <p className="text-white/70 mb-4">Side-by-side visual comparisons</p>
            <div className="flex items-center text-cyan-300 text-sm font-semibold">
              Compare Now ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('interactive')}
            className="card-gradient-success p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üî¨</div>
            <h3 className="text-2xl font-bold text-white mb-2">Interactive Diagrams</h3>
            <p className="text-white/70 mb-4">Explore cells, enzymes, and microscopes</p>
            <div className="flex items-center text-green-300 text-sm font-semibold">
              Explore ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('test')}
            className="card-gradient-amber p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">‚úçÔ∏è</div>
            <h3 className="text-2xl font-bold text-white mb-2">Practice Test</h3>
            <p className="text-white/70 mb-4">20 questions with instant feedback</p>
            <div className="flex items-center text-yellow-300 text-sm font-semibold">
              Take Test ‚Üí
            </div>
          </button>

          <button
            onClick={() => setMode('mistakes')}
            className="card-gradient-rose p-8 rounded-3xl text-left card-hover transform transition-all"
          >
            <div className="text-6xl mb-4">üéØ</div>
            <h3 className="text-2xl font-bold text-white mb-2">Mistake Bank</h3>
            <p className="text-white/70 mb-4">Review and retry wrong answers</p>
            <div className="flex items-center text-rose-300 text-sm font-semibold">
              {mistakeBank.length > 0 ? `Review ${mistakeBank.length} mistakes ‚Üí` : 'No mistakes yet! ‚Üí'}
            </div>
          </button>
        </div>

        {/* Topics Overview */}
        <div className="card p-8 mb-8">
          <h3 className="text-2xl font-bold text-white mb-6">üìã All Topics Covered</h3>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {topicCategories.map((topic, idx) => (
              <div key={idx} className={`${topic.color} p-4 rounded-xl`}>
                <div className="flex items-center gap-3 mb-2">
                  <span className="text-3xl">{topic.icon}</span>
                  <div className="text-white font-bold">{topic.name}</div>
                </div>
                <div className="text-white/80 text-sm">{topic.concepts.length} key concepts</div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );

  // Learn Mode with Quick Facts and Concept Maps
  const LearnMode = () => (
    <div className="min-h-screen p-4 pt-20">
      <div className="max-w-7xl mx-auto">
        {/* Breadcrumbs */}
        <div className="flex items-center justify-between mb-6">
          <div className="flex items-center space-x-2 text-white/60 text-sm">
            <a href="dashboard" className="hover:text-white transition-colors">üè† Dashboard</a>
            <span>/</span>
            <button onClick={() => setMode('menu')} className="hover:text-white transition-colors">Bio Quiz #3</button>
            <span>/</span>
            <span className="text-white font-semibold">Learn Mode</span>
          </div>
          <button onClick={() => setMode('menu')} className="btn-secondary btn-small">
            ‚Üê Back
          </button>
        </div>

        <h1 className="heading-md gradient-text mb-8">üß† Learn Mode</h1>

        {/* Quick Reference Facts */}
        <div className="card mb-8 p-8">
          <h2 className="text-2xl font-bold text-white mb-4">‚ö° Quick Reference Facts</h2>
          <p className="text-white/70 mb-6">Facts that are easy to forget - memorize these!</p>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {quickFacts.map((item, idx) => (
              <div key={idx} className="card-gradient-accent p-4 rounded-xl">
                <div className="flex items-start gap-3">
                  <div className="text-3xl">{item.emoji}</div>
                  <div>
                    <div className="text-white font-bold text-lg mb-1">{item.fact}</div>
                    <div className="badge badge-purple">{item.category}</div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Concept Maps */}
        <div className="card mb-8 p-8">
          <h2 className="text-2xl font-bold text-white mb-6">üó∫Ô∏è Concept Map: Biological Molecules</h2>
          <div className="bg-black/20 rounded-2xl p-8">
            <div className="flex flex-col items-center gap-8">
              {/* Central concept */}
              <div className="card-gradient-violet p-6 rounded-2xl text-center concept-node">
                <div className="text-4xl mb-2">üß¨</div>
                <div className="text-white font-bold text-xl">Biological Molecules</div>
              </div>

              {/* Main categories */}
              <div className="grid grid-cols-1 md:grid-cols-4 gap-6 w-full max-w-5xl">
                {/* Carbohydrates */}
                <div className="flex flex-col gap-4">
                  <div className="card-gradient-amber p-4 rounded-xl concept-node">
                    <div className="text-2xl mb-2">üçû</div>
                    <div className="text-white font-bold">Carbohydrates</div>
                    <div className="text-white/70 text-sm mt-2">CHO (1:2:1)</div>
                  </div>
                  <div className="pl-4 space-y-2 text-sm text-white/80">
                    <div>‚Üí Monosaccharide</div>
                    <div>‚Üí Disaccharide</div>
                    <div>‚Üí Polysaccharide</div>
                    <div className="text-xs text-white/60">Quick energy, storage</div>
                  </div>
                </div>

                {/* Lipids */}
                <div className="flex flex-col gap-4">
                  <div className="card-gradient-rose p-4 rounded-xl concept-node">
                    <div className="text-2xl mb-2">üßà</div>
                    <div className="text-white font-bold">Lipids</div>
                    <div className="text-white/70 text-sm mt-2">Hydrophobic</div>
                  </div>
                  <div className="pl-4 space-y-2 text-sm text-white/80">
                    <div>‚Üí Triglyceride</div>
                    <div>‚Üí Phospholipid</div>
                    <div>‚Üí Steroid</div>
                    <div className="text-xs text-white/60">Long-term energy, membranes</div>
                  </div>
                </div>

                {/* Proteins */}
                <div className="flex flex-col gap-4">
                  <div className="card-gradient-purple p-4 rounded-xl concept-node">
                    <div className="text-2xl mb-2">üîó</div>
                    <div className="text-white font-bold">Proteins</div>
                    <div className="text-white/70 text-sm mt-2">CHON(S)</div>
                  </div>
                  <div className="pl-4 space-y-2 text-sm text-white/80">
                    <div>‚Üí Amino acids</div>
                    <div>‚Üí Peptide bonds</div>
                    <div>‚Üí 4 structures</div>
                    <div className="text-xs text-white/60">Enzymes, structure, transport</div>
                  </div>
                </div>

                {/* Nucleic Acids */}
                <div className="flex flex-col gap-4">
                  <div className="card-gradient-blue p-4 rounded-xl concept-node">
                    <div className="text-2xl mb-2">üß¨</div>
                    <div className="text-white font-bold">Nucleic Acids</div>
                    <div className="text-white/70 text-sm mt-2">CHONP</div>
                  </div>
                  <div className="pl-4 space-y-2 text-sm text-white/80">
                    <div>‚Üí Nucleotides</div>
                    <div>‚Üí DNA / RNA</div>
                    <div>‚Üí ATP</div>
                    <div className="text-xs text-white/60">Genetic information, energy</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* Enzyme Concept Map */}
        <div className="card p-8">
          <h2 className="text-2xl font-bold text-white mb-6">‚ö° Concept Map: Enzymes</h2>
          <div className="bg-black/20 rounded-2xl p-8">
            <div className="flex flex-col items-center gap-8">
              <div className="card-gradient-amber p-6 rounded-2xl text-center concept-node">
                <div className="text-4xl mb-2">‚ö°</div>
                <div className="text-white font-bold text-xl">ENZYME</div>
                <div className="text-white/70 text-sm mt-2">Biological Catalyst</div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl">
                <div className="card p-4">
                  <div className="text-white font-bold mb-2">‚úÖ What it does</div>
                  <ul className="text-white/80 text-sm space-y-1">
                    <li>‚Ä¢ Speeds up reactions</li>
                    <li>‚Ä¢ Lowers activation energy</li>
                    <li>‚Ä¢ NOT consumed</li>
                    <li>‚Ä¢ Reusable</li>
                  </ul>
                </div>

                <div className="card p-4">
                  <div className="text-white font-bold mb-2">üéØ Key Parts</div>
                  <ul className="text-white/80 text-sm space-y-1">
                    <li>‚Ä¢ Active site (substrate binds)</li>
                    <li>‚Ä¢ Allosteric site (regulation)</li>
                    <li>‚Ä¢ Specific shape = specific function</li>
                  </ul>
                </div>

                <div className="card p-4">
                  <div className="text-white font-bold mb-2">‚ö†Ô∏è Factors</div>
                  <ul className="text-white/80 text-sm space-y-1">
                    <li>‚Ä¢ Temperature (optimal ~37¬∞C)</li>
                    <li>‚Ä¢ pH (varies by enzyme)</li>
                    <li>‚Ä¢ Substrate concentration</li>
                    <li>‚Ä¢ Inhibitors (competitive/non)</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );

  return (
    <div className="font-sans">
      {mode === 'menu' && <MenuScreen />}
      {mode === 'learn' && <LearnMode />}
      {/* Other modes will be added in next update */}
      {!['menu', 'learn'].includes(mode) && (
        <div className="min-h-screen p-4 pt-20">
          <div className="max-w-4xl mx-auto text-center">
            <div className="text-6xl mb-4">üöß</div>
            <h2 className="text-3xl font-bold text-white mb-4">Coming Soon!</h2>
            <p className="text-white/70 mb-6">This mode is being enhanced with more visuals and interactive elements.</p>
            <button onClick={() => setMode('menu')} className="btn-primary">
              ‚Üê Back to Menu
            </button>
          </div>
        </div>
      )}
    </div>
  );
}

ReactDOM.render(<BioQuiz3App />, document.getElementById('root'));
    </script>
    <!-- Dynamic Gradient System -->
    <script type="module" src="dynamic-gradient.js"></script>
</body>
</html>